<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width,initial-scale=1.0">
    <link rel="icon" href="../../_static/favicon.ico">
    <title>gino.declarative module - GINO 1.0.0rc3 文档</title>
    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async
            src="https://www.googletagmanager.com/gtag/js?id=UA-3759436-10"></script>
    <script>
        window.dataLayer = window.dataLayer || [];

        function gtag () {
            dataLayer.push(arguments);
        }

        gtag('js', new Date());

        gtag('config', 'UA-3759436-10');
    </script>
    <link rel="stylesheet"
          href="https://fonts.googleapis.com/css?family=Roboto:100,300,400,500,700,900">
    <link rel="stylesheet"
          href="https://cdn.jsdelivr.net/npm/@mdi/font@latest/css/materialdesignicons.min.css">
    <link type="text/css" rel="stylesheet"
          href="../../_static/css/materialize.min.css"
          media="screen,projection"/>
    <link rel="stylesheet" href="../../_static/pygments.css"
          type="text/css"/>
    <link type="text/css" rel="stylesheet"
          href="../../_static/css/gino.css"/>
</head>
<body>

<header>
    <div class="navbar-fixed">
        <nav>
            <div class="nav-wrapper">
                <a href="../../index.html" class="brand-logo">
                    <div class="img"
                         style="background-image: url(../../_static/logo.png); width: 40px; height: 40px; margin-right: 8px"></div>
                    <div class="img"
                         style="background-image: url(../../_static/logo-name.png); width: 100px; height: 32.5px; margin-top: 4px"></div>
                </a>
                <div class="breadcrumbs">
                    <a class="breadcrumb" style="display: none"></a>
                    
                        <a href="../../reference.html"
                           class="breadcrumb">参考手册</a>
                    
                        <a href="../api.html"
                           class="breadcrumb">API 参考</a>
                    
                        <a href="gino.html"
                           class="breadcrumb">gino package</a>
                    
                    
                        <a class="breadcrumb" style="color: #FFFFFF">gino.declarative module</a>
                    
                </div>
                <div class="spacer"></div>
                <div class="search">
                    <input type="text" id="search" placeholder="Search">
                    <i class="mdi mdi-magnify"></i>
                </div>
                <a class="waves-effect waves-light btn-flat theme-dark" href="/">
                    <i class="mdi mdi-home"></i>
                    Home
                </a>
                <a class="waves-effect waves-light btn-flat theme-dark"
                   href="/authors.html">
                    <i class="mdi mdi-account-group"></i>
                    Authors
                </a>
                <a href="https://github.com/python-gino/gino" target="_blank"
                   class="github">
                    <i class="mdi mdi-github-circle"></i>
                </a>
            </div>
        </nav>
    </div>

    <div id="sidenav" class="sidenav sidenav-fixed">
        <p class="caption"><span class="caption-text">上手教程</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../tutorials.html">上手教程</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../tutorials/tutorial.html">上手教程</a></li>
</ul>
<p class="caption"><span class="caption-text">进阶用法</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../how-to.html">进阶用法</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../how-to/contributing.html">贡献</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../how-to/crud.html">CRUD</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../how-to/faq.html">Frequently Asked Questions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../how-to/loaders.html">Loaders and Relationship</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../how-to/pool.html">Connection Pool</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../how-to/sanic.html">Sanic Support</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../how-to/schema.html">Schema Declaration</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../how-to/starlette.html">Starlette Support</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../how-to/tornado.html">Tornado Support</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../how-to/transaction.html">Transaction</a></li>
</ul>
<p class="caption"><span class="caption-text">原理说明</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../explanation.html">原理说明</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../explanation/engine.html">Engine and Connection</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../explanation/why.html">Why Asynchronous ORM?</a></li>
</ul>
<p class="caption"><span class="caption-text">参考手册</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="../../reference.html">参考手册</a><ul class="current">
<li class="toctree-l2 current"><a class="reference internal" href="../api.html">API 参考</a></li>
<li class="toctree-l2"><a class="reference internal" href="../authors.html">制作人员</a></li>
<li class="toctree-l2"><a class="reference internal" href="../history.html">History</a></li>
</ul>
</li>
<li class="toctree-l1 current"><a class="reference internal" href="../api.html">API 参考</a><ul class="current">
<li class="toctree-l2 current"><a class="reference internal" href="gino.html">gino package</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../authors.html">制作人员</a></li>
<li class="toctree-l1"><a class="reference internal" href="../history.html">History</a></li>
</ul>

    </div>
</header>

<main>
    <div class="row">
        <div class="col s12 m9 body">
            
    <div class="section" id="module-gino.declarative">
<span id="gino-declarative-module"></span><h1>gino.declarative module<a class="headerlink" href="#module-gino.declarative" title="永久链接至标题">¶</a></h1>
<dl class="py class">
<dt id="gino.declarative.ColumnAttribute">
<em class="property">class </em><code class="sig-prename descclassname">gino.declarative.</code><code class="sig-name descname">ColumnAttribute</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">prop_name</span></em>, <em class="sig-param"><span class="n">column</span></em><span class="sig-paren">)</span><a class="headerlink" href="#gino.declarative.ColumnAttribute" title="永久链接至目标">¶</a></dt>
<dd><p>基类：<a class="reference external" href="https://docs.python.org/3/library/functions.html#object" title="(在 Python v3.8)"><code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></a></p>
</dd></dl>

<dl class="py class">
<dt id="gino.declarative.Model">
<em class="property">class </em><code class="sig-prename descclassname">gino.declarative.</code><code class="sig-name descname">Model</code><a class="headerlink" href="#gino.declarative.Model" title="永久链接至目标">¶</a></dt>
<dd><p>基类：<a class="reference external" href="https://docs.python.org/3/library/functions.html#object" title="(在 Python v3.8)"><code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></a></p>
</dd></dl>

<dl class="py function">
<dt id="gino.declarative.declarative_base">
<code class="sig-prename descclassname">gino.declarative.</code><code class="sig-name descname">declarative_base</code><span class="sig-paren">(</span><em class="sig-param">metadata</em>, <em class="sig-param">model_classes=(&lt;class 'gino.declarative.Model'&gt;</em>, <em class="sig-param">)</em>, <em class="sig-param">name='Model'</em><span class="sig-paren">)</span><a class="headerlink" href="#gino.declarative.declarative_base" title="永久链接至目标">¶</a></dt>
<dd></dd></dl>

<dl class="py function">
<dt id="gino.declarative.declared_attr">
<code class="sig-prename descclassname">gino.declarative.</code><code class="sig-name descname">declared_attr</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">m</span></em><span class="sig-paren">)</span><a class="headerlink" href="#gino.declarative.declared_attr" title="永久链接至目标">¶</a></dt>
<dd><p>Mark a class-level method as a factory of attribute.</p>
<p>This is intended to be used as decorators on class-level methods of a
<a class="reference internal" href="#gino.declarative.Model" title="gino.declarative.Model"><code class="xref py py-class docutils literal notranslate"><span class="pre">Model</span></code></a> class. When initializing the class as well as its
subclasses, the decorated factory method will be called for each class, the
returned result will be set on the class in place of the factory method
under the same name.</p>
<p><code class="docutils literal notranslate"><span class="pre">&#64;declared_attr</span></code> is implemented differently than
<a class="reference external" href="https://docs.sqlalchemy.org/en/13/orm/extensions/declarative/api.html#sqlalchemy.ext.declarative.declared_attr" title="(在 SQLAlchemy v1.3)"><code class="xref py py-class docutils literal notranslate"><span class="pre">declared_attr</span></code></a> of SQLAlchemy, but they
are both more often used on mixins to dynamically declare indices or
constraints (also works for column and <code class="docutils literal notranslate"><span class="pre">__table_args__</span></code>, or even normal
class attributes):</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">TrackedMixin</span><span class="p">:</span>
    <span class="n">created</span> <span class="o">=</span> <span class="n">db</span><span class="o">.</span><span class="n">Column</span><span class="p">(</span><span class="n">db</span><span class="o">.</span><span class="n">DateTime</span><span class="p">(</span><span class="n">timezone</span><span class="o">=</span><span class="kc">True</span><span class="p">))</span>

    <span class="nd">@db</span><span class="o">.</span><span class="n">declared_attr</span>
    <span class="k">def</span> <span class="nf">unique_id</span><span class="p">(</span><span class="bp">cls</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">db</span><span class="o">.</span><span class="n">Column</span><span class="p">(</span><span class="n">db</span><span class="o">.</span><span class="n">Integer</span><span class="p">())</span>

    <span class="nd">@db</span><span class="o">.</span><span class="n">declared_attr</span>
    <span class="k">def</span> <span class="nf">unique_constraint</span><span class="p">(</span><span class="bp">cls</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">db</span><span class="o">.</span><span class="n">UniqueConstraint</span><span class="p">(</span><span class="s1">&#39;unique_id&#39;</span><span class="p">)</span>

    <span class="nd">@db</span><span class="o">.</span><span class="n">declared_attr</span>
    <span class="k">def</span> <span class="nf">poly</span><span class="p">(</span><span class="bp">cls</span><span class="p">):</span>
        <span class="k">if</span> <span class="bp">cls</span><span class="o">.</span><span class="vm">__name__</span> <span class="o">==</span> <span class="s1">&#39;Thing&#39;</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">db</span><span class="o">.</span><span class="n">Column</span><span class="p">(</span><span class="n">db</span><span class="o">.</span><span class="n">Unicode</span><span class="p">())</span>

    <span class="nd">@db</span><span class="o">.</span><span class="n">declared_attr</span>
    <span class="k">def</span> <span class="nf">__table_args__</span><span class="p">(</span><span class="bp">cls</span><span class="p">):</span>
        <span class="k">if</span> <span class="bp">cls</span><span class="o">.</span><span class="vm">__name__</span> <span class="o">==</span> <span class="s1">&#39;Thing&#39;</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">db</span><span class="o">.</span><span class="n">UniqueConstraint</span><span class="p">(</span><span class="s1">&#39;poly&#39;</span><span class="p">),</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">注解</p>
<p>This doesn't work if the model already had a <code class="docutils literal notranslate"><span class="pre">__table__</span></code>.</p>
</div>
</dd></dl>

<dl class="py class">
<dt id="gino.declarative.InvertDict">
<em class="property">class </em><code class="sig-prename descclassname">gino.declarative.</code><code class="sig-name descname">InvertDict</code><span class="sig-paren">(</span><em class="sig-param"><span class="o">*</span><span class="n">args</span></em>, <em class="sig-param"><span class="o">**</span><span class="n">kwargs</span></em><span class="sig-paren">)</span><a class="headerlink" href="#gino.declarative.InvertDict" title="永久链接至目标">¶</a></dt>
<dd><p>基类：<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(在 Python v3.8)"><code class="xref py py-class docutils literal notranslate"><span class="pre">dict</span></code></a></p>
<dl class="py method">
<dt id="gino.declarative.InvertDict.invert_get">
<code class="sig-name descname">invert_get</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">key</span></em>, <em class="sig-param"><span class="n">default</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="headerlink" href="#gino.declarative.InvertDict.invert_get" title="永久链接至目标">¶</a></dt>
<dd></dd></dl>

</dd></dl>

</div>


        </div>

        <div class="col hide-on-small-only m3 right-nav">
            <div class="table-of-contents fixed">
                
                    <ul>
<li><a class="reference internal" href="#">gino.declarative module</a></li>
</ul>

                
            </div>
        </div>

    </div>
    <div class="fixed-action-btn click-to-toggle">
        <a class="btn-floating btn-large blue">
            <i class="mdi mdi-translate"></i>
        </a>
        <ul>
            <li><a href="/docs/en/v1.0.0rc3" class="btn-floating blue">EN</a></li>
            <li><a href="/docs/zh/v1.0.0rc3" class="btn-floating red">ZH</a></li>
        </ul>
    </div>
</main>

<script type="text/javascript"
        src="../../_static/js/materialize.min.js"></script>
<script type="text/javascript"
        src="../../_static/js/gino.js"></script>
</body>
</html>