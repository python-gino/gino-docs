<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width,initial-scale=1.0">
    <link rel="icon" href="../../_static/favicon.ico">
    <title>gino.transaction module - GINO 1.0.0rc4 文档</title>
    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async
            src="https://www.googletagmanager.com/gtag/js?id=UA-3759436-10"></script>
    <script>
        window.dataLayer = window.dataLayer || [];

        function gtag () {
            dataLayer.push(arguments);
        }

        gtag('js', new Date());

        gtag('config', 'UA-3759436-10');
    </script>
    <link rel="stylesheet"
          href="https://fonts.googleapis.com/css?family=Raleway:400,500,600,700&display=swap">
    <link rel="stylesheet"
          href="https://cdn.jsdelivr.net/npm/@mdi/font@latest/css/materialdesignicons.min.css">
    <link type="text/css" rel="stylesheet"
          href="../../_static/css/materialize.min.css"
          media="screen,projection"/>
    <link rel="stylesheet" href="../../_static/pygments.css"
          type="text/css"/>
    <link type="text/css" rel="stylesheet"
          href="../../_static/css/gino.css"/>
</head>
<body>

<header>
    <div class="navbar-fixed">
        <nav>
            <div class="nav-wrapper">
                <a href="../../index.html" class="brand-logo">
                    <div class="img"
                         style="background-image: url(../../_static/logo.svg); width: 103px; height: 40px;"></div>
                </a>
                <div class="breadcrumbs">
                    <a class="breadcrumb" style="display: none"></a>
                    
                        <a href="../../reference.html"
                           class="breadcrumb">参考手册</a>
                    
                        <a href="../api.html"
                           class="breadcrumb">API 参考</a>
                    
                        <a href="gino.html"
                           class="breadcrumb">gino package</a>
                    
                    
                        <a class="breadcrumb" style="color: #FFFFFF">gino.transaction module</a>
                    
                </div>
                <div class="spacer"></div>
                <div id="search-container" class="search">
                    <input type="text" id="search" placeholder="Search">
                    <i class="mdi mdi-magnify"></i>
                    <div id="search-results" style="display: none"></div>
                </div>
                <a class="btn-flat theme-dark" href="/">
                    HOME
                </a>
                <a class="btn-flat theme-dark" href="/authors.html">
                    CREDITS
                </a>
                <a href="https://github.com/python-gino/gino" target="_blank"
                   class="github-stars">
                    <div class="left"><img
                        src="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPHN2ZyB3aWR0aD0iNDNweCIgaGVpZ2h0PSI0MnB4IiB2aWV3Qm94PSIwIDAgNDMgNDIiIHZlcnNpb249IjEuMSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayI+CiAgICA8IS0tIEdlbmVyYXRvcjogU2tldGNoIDYxLjIgKDg5NjUzKSAtIGh0dHBzOi8vc2tldGNoLmNvbSAtLT4KICAgIDx0aXRsZT5GaWxsIDQ5PC90aXRsZT4KICAgIDxkZXNjPkNyZWF0ZWQgd2l0aCBTa2V0Y2guPC9kZXNjPgogICAgPGcgaWQ9IlYzLeacgOaWsOeov+S7tiIgc3Ryb2tlPSJub25lIiBzdHJva2Utd2lkdGg9IjEiIGZpbGw9Im5vbmUiIGZpbGwtcnVsZT0iZXZlbm9kZCI+CiAgICAgICAgPGcgaWQ9IkhPTUUtdjMiIHRyYW5zZm9ybT0idHJhbnNsYXRlKC0xNTA3LjAwMDAwMCwgLTQ5LjAwMDAwMCkiIGZpbGw9IiNGRkZGRkUiPgogICAgICAgICAgICA8ZyBpZD0iYmFubmVyLWJnIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgtMzc5LjAwMDAwMCwgLTE4Ny4wMDAwMDApIj4KICAgICAgICAgICAgICAgIDxnIGlkPSJoZWFkZXIiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDU5Ny4wMDAwMDAsIDIxOC4wMDAwMDApIj4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTMxMC40OTgwMiwxOCBDMTI5OC42MjcxMiwxOCAxMjg5LDI3LjYzOTg4MzEgMTI4OSwzOS41MzIxMTIzIEMxMjg5LDQ5LjA0NTEwMjYgMTI5NS4xNTk4Myw1Ny4xMTQ2ODggMTMwMy43MDMzNCw1OS45NjE4NDM5IEMxMzA0Ljc3OTAzLDYwLjE2MDExMzggMTMwNS4xNzEwMyw1OS40OTUyNDg3IDEzMDUuMTcxMDMsNTguOTI0MjMxMyBDMTMwNS4xNzEwMyw1OC40MTI2OTUgMTMwNS4xNTI1NSw1Ny4wNTkxNzI0IDEzMDUuMTQxOTksNTUuMjYyODQ3IEMxMjk5LjE2MTY3LDU2LjU2MzQ5NzYgMTI5Ny44OTk4Nyw1Mi4zNzYwMzcxIDEyOTcuODk5ODcsNTIuMzc2MDM3MSBDMTI5Ni45MjE4NSw0OS44ODg0MTA2IDEyOTUuNTEyMjMsNDkuMjI2MTg5MSAxMjk1LjUxMjIzLDQ5LjIyNjE4OTEgQzEyOTMuNTYwMTUsNDcuODkxMTcxNyAxMjk1LjY2MDA2LDQ3LjkxNzYwNzcgMTI5NS42NjAwNiw0Ny45MTc2MDc3IEMxMjk3LjgxODA0LDQ4LjA2OTYxNDYgMTI5OC45NTMxMyw1MC4xMzY5MDg5IDEyOTguOTUzMTMsNTAuMTM2OTA4OSBDMTMwMC44NzA5LDUzLjQyNjg2NzYgMTMwMy45ODU3OSw1Mi40NzY0OTM4IDEzMDUuMjEwNjMsNTEuOTI1MzAzNSBDMTMwNS40MDU5Nyw1MC41MzQ3NzA1IDEzMDUuOTYxNjMsNDkuNTg1NzE4NiAxMzA2LjU3NTM3LDQ5LjA0Nzc0NjIgQzEzMDEuODAxNDEsNDguNTA0NDg2NiAxMjk2Ljc4MTk1LDQ2LjY1NjYxMTEgMTI5Ni43ODE5NSwzOC40MDU5MzkyIEMxMjk2Ljc4MTk1LDM2LjA1NTc3OTkgMTI5Ny42MjAwNiwzNC4xMzI1NjE3IDEyOTguOTk1MzcsMzIuNjI4MzU0IEMxMjk4Ljc3MzYzLDMyLjA4Mzc3MjYgMTI5OC4wMzU4MiwyOS44OTM1NTEgMTI5OS4yMDY1NCwyNi45MzAwNzY4IEMxMjk5LjIwNjU0LDI2LjkzMDA3NjggMTMwMS4wMTA4LDI2LjM1MTEyODYgMTMwNS4xMTgyNCwyOS4xMzc0ODE4IEMxMzA2LjgzMjc1LDI4LjY1ODk5MDQgMTMwOC42NzI2NCwyOC40MjEwNjY1IDEzMTAuNTAwNjYsMjguNDExODEzOSBDMTMxMi4zMjczNiwyOC40MjEwNjY1IDEzMTQuMTY1OTQsMjguNjU4OTkwNCAxMzE1Ljg4MzA4LDI5LjEzNzQ4MTggQzEzMTkuOTg3ODgsMjYuMzUxMTI4NiAxMzIxLjc4OTUsMjYuOTMwMDc2OCAxMzIxLjc4OTUsMjYuOTMwMDc2OCBDMTMyMi45NjI4NiwyOS44OTM1NTEgMTMyMi4yMjUwNSwzMi4wODM3NzI2IDEzMjIuMDA0NjMsMzIuNjI4MzU0IEMxMzIzLjM4MjU4LDM0LjEzMjU2MTcgMTMyNC4yMTQwOSwzNi4wNTU3Nzk5IDEzMjQuMjE0MDksMzguNDA1OTM5MiBDMTMyNC4yMTQwOSw0Ni42Nzc3NTk5IDEzMTkuMTg2NzIsNDguNDk3ODc3NiAxMzE0LjM5ODIzLDQ5LjAzMDU2MjggQzEzMTUuMTY5MDQsNDkuNjk1NDI3OSAxMzE1Ljg1NjY5LDUxLjAwOTI5NjUgMTMxNS44NTY2OSw1My4wMTcxMDk4IEMxMzE1Ljg1NjY5LDU1Ljg5NTk4ODkgMTMxNS44MzAyOSw1OC4yMTgzOTA1IDEzMTUuODMwMjksNTguOTI0MjMxMyBDMTMxNS44MzAyOSw1OS41MDA1MzU5IDEzMTYuMjE4MzMsNjAuMTcwNjg4MiAxMzE3LjMwODU0LDU5Ljk2MDUyMjEgQzEzMjUuODQ1NDUsNTcuMTA2NzU3MiAxMzMyLDQ5LjA0MjQ1OSAxMzMyLDM5LjUzMjExMjMgQzEzMzIsMjcuNjM5ODgzMSAxMzIyLjM3Mjg4LDE4IDEzMTAuNDk4MDIsMTgiIGlkPSJGaWxsLTQ5Ij48L3BhdGg+CiAgICAgICAgICAgICAgICA8L2c+CiAgICAgICAgICAgIDwvZz4KICAgICAgICA8L2c+CiAgICA8L2c+Cjwvc3ZnPg=="
                        class="github-logo">
                        GitHub
                    </div>
                    <div class="right"><img
                        src="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPHN2ZyB3aWR0aD0iMjFweCIgaGVpZ2h0PSIxOXB4IiB2aWV3Qm94PSIwIDAgMjEgMTkiIHZlcnNpb249IjEuMSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayI+CiAgICA8IS0tIEdlbmVyYXRvcjogU2tldGNoIDYxLjIgKDg5NjUzKSAtIGh0dHBzOi8vc2tldGNoLmNvbSAtLT4KICAgIDx0aXRsZT5QYXRoPC90aXRsZT4KICAgIDxkZXNjPkNyZWF0ZWQgd2l0aCBTa2V0Y2guPC9kZXNjPgogICAgPGcgaWQ9IlYzLeacgOaWsOeov+S7tiIgc3Ryb2tlPSJub25lIiBzdHJva2Utd2lkdGg9IjEiIGZpbGw9Im5vbmUiIGZpbGwtcnVsZT0iZXZlbm9kZCI+CiAgICAgICAgPGcgaWQ9IkhPTUUtdjMiIHRyYW5zZm9ybT0idHJhbnNsYXRlKC0xNTYxLjAwMDAwMCwgLTYwLjAwMDAwMCkiIGZpbGw9IiNGOEQyMzAiPgogICAgICAgICAgICA8ZyBpZD0iYmFubmVyLWJnIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgtMzc5LjAwMDAwMCwgLTE4Ny4wMDAwMDApIj4KICAgICAgICAgICAgICAgIDxnIGlkPSJoZWFkZXIiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDU5Ny4wMDAwMDAsIDIxOC4wMDAwMDApIj4KICAgICAgICAgICAgICAgICAgICA8ZyBpZD0ibGFiZWwtY29weS0xMiIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMTI4OS4wMDAwMDAsIDE4LjAwMDAwMCkiPgogICAgICAgICAgICAgICAgICAgICAgICA8cG9seWdvbiBpZD0iUGF0aCIgcG9pbnRzPSI2MS4wNTQzNTQzIDE3Ljc1NzM4MzYgNTQuMjE1MjQ2NiAxOC4zMTMzOTI5IDU5Ljg4OTM1MTcgMjIuOTczNzM4NyA1Ny43ODQ1MjI4IDI5Ljg0MDExODQgNjQuNDQyNTI3MSAyNi41NDM0MTg4IDcwLjU3NzcyMzkgMjkuODQwMTE4NCA2OS4yMzA0MzI1IDIyLjk3MzczODcgNzQuNzMyNTY5NiAxOC4zMTMzOTI5IDY3Ljg5MzQ2MiAxNy43NTczODM2IDY0LjQ0MjUyNzEgMTEuMzc1Ij48L3BvbHlnb24+CiAgICAgICAgICAgICAgICAgICAgPC9nPgogICAgICAgICAgICAgICAgPC9nPgogICAgICAgICAgICA8L2c+CiAgICAgICAgPC9nPgogICAgPC9nPgo8L3N2Zz4=">
                        <span id="github-star-num"></span>
                    </div>
                </a>
            </div>
        </nav>
    </div>

    <div id="sidenav" class="sidenav sidenav-fixed">
        <p class="caption"><span class="caption-text">上手教程</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../tutorials.html">上手教程</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../tutorials/tutorial.html">GINO Basics</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../tutorials/fastapi.html">Build a FastAPI Server</a></li>
</ul>
<p class="caption"><span class="caption-text">进阶用法</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../how-to.html">进阶用法</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../how-to/alembic.html">Use Alembic</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../how-to/contributing.html">贡献</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../how-to/crud.html">CRUD</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../how-to/faq.html">Frequently Asked Questions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../how-to/loaders.html">Loaders and Relationship</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../how-to/pool.html">Connection Pool</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../how-to/schema.html">Schema Declaration</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../how-to/transaction.html">Transaction</a></li>
</ul>
<p class="caption"><span class="caption-text">原理说明</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../explanation.html">原理说明</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../explanation/engine.html">Engine and Connection</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../explanation/why.html">Why Asynchronous ORM?</a></li>
</ul>
<p class="caption"><span class="caption-text">参考手册</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="../../reference.html">参考手册</a><ul class="current">
<li class="toctree-l2 current"><a class="reference internal" href="../api.html">API 参考</a></li>
<li class="toctree-l2"><a class="reference internal" href="../extensions.html">Extensions</a></li>
<li class="toctree-l2"><a class="reference internal" href="../history.html">History</a></li>
</ul>
</li>
<li class="toctree-l1 current"><a class="reference internal" href="../api.html">API 参考</a><ul class="current">
<li class="toctree-l2 current"><a class="reference internal" href="gino.html">gino package</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../extensions.html">Extensions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../history.html">History</a></li>
</ul>

    </div>
</header>

<main>
    <div class="row">
        <div class="col s12 m9 body">
            <div id="main-content" role="main">
                
    <div class="section" id="module-gino.transaction">
<span id="gino-transaction-module"></span><h1>gino.transaction module<a class="headerlink" href="#module-gino.transaction" title="永久链接至标题">¶</a></h1>
<dl class="py class">
<dt id="gino.transaction.GinoTransaction">
<em class="property">class </em><code class="sig-prename descclassname">gino.transaction.</code><code class="sig-name descname">GinoTransaction</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">conn</span></em>, <em class="sig-param"><span class="n">args</span></em>, <em class="sig-param"><span class="n">kwargs</span></em><span class="sig-paren">)</span><a class="headerlink" href="#gino.transaction.GinoTransaction" title="永久链接至目标">¶</a></dt>
<dd><p>基类：<a class="reference external" href="https://docs.python.org/3/library/functions.html#object" title="(在 Python v3.8)"><code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></a></p>
<p>Represents an underlying database transaction and its connection, offering
methods to manage this transaction.</p>
<p><a class="reference internal" href="#gino.transaction.GinoTransaction" title="gino.transaction.GinoTransaction"><code class="xref py py-class docutils literal notranslate"><span class="pre">GinoTransaction</span></code></a> is supposed to be created by either
<a class="reference internal" href="gino.engine.html#gino.engine.GinoConnection.transaction" title="gino.engine.GinoConnection.transaction"><code class="xref py py-meth docutils literal notranslate"><span class="pre">gino.engine.GinoConnection.transaction()</span></code></a>, or
<a class="reference internal" href="gino.engine.html#gino.engine.GinoEngine.transaction" title="gino.engine.GinoEngine.transaction"><code class="xref py py-meth docutils literal notranslate"><span class="pre">gino.engine.GinoEngine.transaction()</span></code></a>, or
<a class="reference internal" href="gino.api.html#gino.api.Gino.transaction" title="gino.api.Gino.transaction"><code class="xref py py-meth docutils literal notranslate"><span class="pre">gino.api.Gino.transaction()</span></code></a>, shown as follows:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">async</span> <span class="k">with</span> <span class="n">db</span><span class="o">.</span><span class="n">transaction</span><span class="p">()</span> <span class="k">as</span> <span class="n">tx</span><span class="p">:</span>
    <span class="o">...</span>

<span class="k">async</span> <span class="k">with</span> <span class="n">engine</span><span class="o">.</span><span class="n">transaction</span><span class="p">()</span> <span class="k">as</span> <span class="n">tx</span><span class="p">:</span>
    <span class="o">...</span>

<span class="k">async</span> <span class="k">with</span> <span class="n">conn</span><span class="o">.</span><span class="n">transaction</span><span class="p">()</span> <span class="k">as</span> <span class="n">tx</span><span class="p">:</span>
    <span class="o">...</span>

<span class="n">tx</span> <span class="o">=</span> <span class="k">await</span> <span class="n">conn</span><span class="o">.</span><span class="n">transaction</span><span class="p">()</span>
<span class="k">try</span><span class="p">:</span>
    <span class="o">...</span>
    <span class="k">await</span> <span class="n">tx</span><span class="o">.</span><span class="n">commit</span><span class="p">()</span>
<span class="k">except</span> <span class="ne">Exception</span><span class="p">:</span>
    <span class="k">await</span> <span class="n">tx</span><span class="o">.</span><span class="n">rollback</span><span class="p">()</span>
    <span class="k">raise</span>
</pre></div>
</div>
<p>When in use with asynchronous context manager, <a class="reference internal" href="#gino.transaction.GinoTransaction" title="gino.transaction.GinoTransaction"><code class="xref py py-class docutils literal notranslate"><span class="pre">GinoTransaction</span></code></a>
will be in <strong>managed</strong> mode, while the last example with <code class="docutils literal notranslate"><span class="pre">await</span></code> will put
the <a class="reference internal" href="#gino.transaction.GinoTransaction" title="gino.transaction.GinoTransaction"><code class="xref py py-class docutils literal notranslate"><span class="pre">GinoTransaction</span></code></a> in <strong>manual</strong> mode where you have to call
the <a class="reference internal" href="#gino.transaction.GinoTransaction.commit" title="gino.transaction.GinoTransaction.commit"><code class="xref py py-meth docutils literal notranslate"><span class="pre">commit()</span></code></a> or <a class="reference internal" href="#gino.transaction.GinoTransaction.rollback" title="gino.transaction.GinoTransaction.rollback"><code class="xref py py-meth docutils literal notranslate"><span class="pre">rollback()</span></code></a> to manually close the transaction.</p>
<p>In <strong>managed</strong> mode the transaction will be automatically committed or
rolled back on exiting the <code class="docutils literal notranslate"><span class="pre">async</span> <span class="pre">with</span></code> block depending on whether there
is an exception or not. Meanwhile, you can explicitly exit the transaction
early by <a class="reference internal" href="#gino.transaction.GinoTransaction.raise_commit" title="gino.transaction.GinoTransaction.raise_commit"><code class="xref py py-meth docutils literal notranslate"><span class="pre">raise_commit()</span></code></a> or <a class="reference internal" href="#gino.transaction.GinoTransaction.raise_rollback" title="gino.transaction.GinoTransaction.raise_rollback"><code class="xref py py-meth docutils literal notranslate"><span class="pre">raise_rollback()</span></code></a> which will raise
an internal exception managed by the asynchronous context manager and
interpreted as a commit or rollback action. In a nested transaction
situation, the two exit-early methods always close up the very transaction
which the two methods are referenced upon - all children transactions are
either committed or rolled back correspondingly, while no parent
transaction was ever touched. For example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">async</span> <span class="k">with</span> <span class="n">db</span><span class="o">.</span><span class="n">transaction</span><span class="p">()</span> <span class="k">as</span> <span class="n">tx1</span><span class="p">:</span>
    <span class="k">async</span> <span class="k">with</span> <span class="n">db</span><span class="o">.</span><span class="n">transaction</span><span class="p">()</span> <span class="k">as</span> <span class="n">tx2</span><span class="p">:</span>
        <span class="k">async</span> <span class="k">with</span> <span class="n">db</span><span class="o">.</span><span class="n">transaction</span><span class="p">()</span> <span class="k">as</span> <span class="n">tx3</span><span class="p">:</span>
            <span class="n">tx2</span><span class="o">.</span><span class="n">raise_rollback</span><span class="p">()</span>
            <span class="c1"># Won&#39;t reach here</span>
        <span class="c1"># Won&#39;t reach here</span>
    <span class="c1"># Continues here with tx1, with both tx2 and tx3 rolled back.</span>

    <span class="c1"># For PostgreSQL, tx1 can still be committed successfully because</span>
    <span class="c1"># tx2 and tx3 are just SAVEPOINTs in transaction tx1</span>
</pre></div>
</div>
<div class="admonition tip">
<p class="admonition-title">小技巧</p>
<p>The internal exception raised from <a class="reference internal" href="#gino.transaction.GinoTransaction.raise_commit" title="gino.transaction.GinoTransaction.raise_commit"><code class="xref py py-meth docutils literal notranslate"><span class="pre">raise_commit()</span></code></a> and
<a class="reference internal" href="#gino.transaction.GinoTransaction.raise_rollback" title="gino.transaction.GinoTransaction.raise_rollback"><code class="xref py py-meth docutils literal notranslate"><span class="pre">raise_rollback()</span></code></a> is a subclass of <a class="reference external" href="https://docs.python.org/3/library/exceptions.html#BaseException" title="(在 Python v3.8)"><code class="xref py py-exc docutils literal notranslate"><span class="pre">BaseException</span></code></a>, so
normal <code class="docutils literal notranslate"><span class="pre">try</span> <span class="pre">...</span> <span class="pre">except</span> <span class="pre">Exception:</span></code> can't trap the commit or rollback.</p>
</div>
<dl class="py method">
<dt id="gino.transaction.GinoTransaction.commit">
<em class="property">async </em><code class="sig-name descname">commit</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#gino.transaction.GinoTransaction.commit" title="永久链接至目标">¶</a></dt>
<dd><p>Only available in manual mode: manually commit this transaction.</p>
</dd></dl>

<dl class="py method">
<dt id="gino.transaction.GinoTransaction.connection">
<em class="property">property </em><code class="sig-name descname">connection</code><a class="headerlink" href="#gino.transaction.GinoTransaction.connection" title="永久链接至目标">¶</a></dt>
<dd><p>Accesses to the <a class="reference internal" href="gino.engine.html#gino.engine.GinoConnection" title="gino.engine.GinoConnection"><code class="xref py py-class docutils literal notranslate"><span class="pre">GinoConnection</span></code></a> of this
transaction. This is useful if when the transaction is started from
<code class="docutils literal notranslate"><span class="pre">db</span></code> or <code class="docutils literal notranslate"><span class="pre">engine</span></code> where the connection is implicitly acquired for
you together with the transaction.</p>
</dd></dl>

<dl class="py method">
<dt id="gino.transaction.GinoTransaction.raise_commit">
<code class="sig-name descname">raise_commit</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#gino.transaction.GinoTransaction.raise_commit" title="永久链接至目标">¶</a></dt>
<dd><p>Only available in managed mode: skip rest of the code in this
transaction and commit immediately by raising an internal exception,
which will be caught and handled by the asynchronous context manager:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">async</span> <span class="k">with</span> <span class="n">db</span><span class="o">.</span><span class="n">transaction</span><span class="p">()</span> <span class="k">as</span> <span class="n">tx</span><span class="p">:</span>
    <span class="k">await</span> <span class="n">user</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">age</span><span class="o">=</span><span class="mi">64</span><span class="p">)</span><span class="o">.</span><span class="n">apply</span><span class="p">()</span>
    <span class="n">tx</span><span class="o">.</span><span class="n">raise_commit</span><span class="p">()</span>
    <span class="k">await</span> <span class="n">user</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">age</span><span class="o">=</span><span class="mi">32</span><span class="p">)</span><span class="o">.</span><span class="n">apply</span><span class="p">()</span>  <span class="c1"># won&#39;t reach here</span>

<span class="k">assert</span> <span class="n">user</span><span class="o">.</span><span class="n">age</span> <span class="o">==</span> <span class="mi">64</span>  <span class="c1"># no exception raised before</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt id="gino.transaction.GinoTransaction.raise_rollback">
<code class="sig-name descname">raise_rollback</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#gino.transaction.GinoTransaction.raise_rollback" title="永久链接至目标">¶</a></dt>
<dd><p>Only available in managed mode: skip rest of the code in this
transaction and rollback immediately by raising an internal exception,
which will be caught and handled by the asynchronous context manager:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">assert</span> <span class="n">user</span><span class="o">.</span><span class="n">age</span> <span class="o">==</span> <span class="mi">64</span>  <span class="c1"># assumption</span>

<span class="k">async</span> <span class="k">with</span> <span class="n">db</span><span class="o">.</span><span class="n">transaction</span><span class="p">()</span> <span class="k">as</span> <span class="n">tx</span><span class="p">:</span>
    <span class="k">await</span> <span class="n">user</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">age</span><span class="o">=</span><span class="mi">32</span><span class="p">)</span><span class="o">.</span><span class="n">apply</span><span class="p">()</span>
    <span class="n">tx</span><span class="o">.</span><span class="n">raise_rollback</span><span class="p">()</span>
    <span class="k">await</span> <span class="n">user</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">age</span><span class="o">=</span><span class="mi">128</span><span class="p">)</span><span class="o">.</span><span class="n">apply</span><span class="p">()</span>  <span class="c1"># won&#39;t reach here</span>

<span class="k">assert</span> <span class="n">user</span><span class="o">.</span><span class="n">age</span> <span class="o">==</span> <span class="mi">64</span>  <span class="c1"># no exception raised before</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt id="gino.transaction.GinoTransaction.raw_transaction">
<em class="property">property </em><code class="sig-name descname">raw_transaction</code><a class="headerlink" href="#gino.transaction.GinoTransaction.raw_transaction" title="永久链接至目标">¶</a></dt>
<dd><p>Accesses to the underlying transaction object, whose type depends on
the dialect in use.</p>
</dd></dl>

<dl class="py method">
<dt id="gino.transaction.GinoTransaction.rollback">
<em class="property">async </em><code class="sig-name descname">rollback</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#gino.transaction.GinoTransaction.rollback" title="永久链接至目标">¶</a></dt>
<dd><p>Only available in manual mode: manually rollback this transaction.</p>
</dd></dl>

</dd></dl>

</div>


            </div>
        </div>

        <div class="col hide-on-small-only m3 right-nav">
            <div class="table-of-contents fixed">
                
                    <ul>
<li><a class="reference internal" href="#">gino.transaction module</a></li>
</ul>

                
            </div>
        </div>

    </div>
    <div class="fixed-action-btn click-to-toggle">
        <a class="btn-floating btn-large white">
            <img src="../../_static/images/language.svg">
            <div>
              ZH
            </div>
        </a>
        <ul>
            <li><a href="/docs/en/master/reference/api/gino.transaction.html" class="btn-floating blue">EN</a></li>
            <li><a href="/docs/zh/master/reference/api/gino.transaction.html" class="btn-floating red">ZH</a></li>
        </ul>
    </div>
</main>

<script type="text/javascript" src="../../_static/js/materialize.min.js"></script>
<script type="text/javascript" src="../../_static/js/language_data.js"></script>
<script id="documentation_options" data-url_root="../../" src="../../_static/js/documentation_options.js"></script>
<script type="text/javascript" src="../../_static/js/underscore.js"></script>
<script type="text/javascript" src="../../_static/js/jquery.js"></script>
<script type="text/javascript" src="../../_static/js/gino.js"></script>
<script type="text/javascript" src="../../searchindex.js"></script>
</body>
</html>