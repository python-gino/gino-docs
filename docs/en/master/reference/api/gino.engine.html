<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width,initial-scale=1.0">
    <link rel="icon" href="../../_static/favicon.ico">
    <title>gino.engine module - GINO 1.1.0b1 documentation</title>
    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async
            src="https://www.googletagmanager.com/gtag/js?id=UA-3759436-10"></script>
    <script>
        window.dataLayer = window.dataLayer || [];

        function gtag () {
            dataLayer.push(arguments);
        }

        gtag('js', new Date());

        gtag('config', 'UA-3759436-10');
    </script>
    <link rel="stylesheet"
          href="https://fonts.googleapis.com/css?family=Raleway:400,500,600,700&display=swap">
    <link rel="stylesheet"
          href="https://cdn.jsdelivr.net/npm/@mdi/font@latest/css/materialdesignicons.min.css">
    <link type="text/css" rel="stylesheet"
          href="../../_static/css/materialize.min.css"
          media="screen,projection"/>
    <link rel="stylesheet" href="../../_static/pygments.css"
          type="text/css"/>
    <link type="text/css" rel="stylesheet"
          href="../../_static/css/gino.css"/>
</head>
<body>

<header>
    <div class="navbar-fixed">
        <nav>
            <div class="nav-wrapper">
                <a href="#" data-target="sidenav" class="sidenav-trigger"><hr><hr><hr></a>
                <a href="../../index.html" class="brand-logo">
                    <div class="img"
                         style="background-image: url(../../_static/logo.svg); width: 103px; height: 40px;"></div>
                </a>
                <div class="breadcrumbs">
                    <a class="breadcrumb" style="display: none"></a>
                    
                        <a href="../../reference.html"
                           class="breadcrumb">Reference</a>
                    
                        <a href="../api.html"
                           class="breadcrumb">API Reference</a>
                    
                        <a href="gino.html"
                           class="breadcrumb">gino package</a>
                    
                    
                        <a class="breadcrumb" style="color: #FFFFFF">gino.engine module</a>
                    
                </div>
                <div class="spacer"></div>
                <div id="search-container" class="search">
                    <input type="text" id="search" placeholder="Search">
                    <i class="mdi mdi-magnify"></i>
                    <div id="search-results" style="display: none"></div>
                </div>
                <a class="btn-flat theme-dark" href="/">
                    HOME
                </a>
                <a class="btn-flat theme-dark" href="/authors.html">
                    CREDITS
                </a>
                <a href="https://github.com/python-gino/gino" target="_blank"
                   class="github-stars">
                    <div class="left"><img
                        src="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPHN2ZyB3aWR0aD0iNDNweCIgaGVpZ2h0PSI0MnB4IiB2aWV3Qm94PSIwIDAgNDMgNDIiIHZlcnNpb249IjEuMSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayI+CiAgICA8IS0tIEdlbmVyYXRvcjogU2tldGNoIDYxLjIgKDg5NjUzKSAtIGh0dHBzOi8vc2tldGNoLmNvbSAtLT4KICAgIDx0aXRsZT5GaWxsIDQ5PC90aXRsZT4KICAgIDxkZXNjPkNyZWF0ZWQgd2l0aCBTa2V0Y2guPC9kZXNjPgogICAgPGcgaWQ9IlYzLeacgOaWsOeov+S7tiIgc3Ryb2tlPSJub25lIiBzdHJva2Utd2lkdGg9IjEiIGZpbGw9Im5vbmUiIGZpbGwtcnVsZT0iZXZlbm9kZCI+CiAgICAgICAgPGcgaWQ9IkhPTUUtdjMiIHRyYW5zZm9ybT0idHJhbnNsYXRlKC0xNTA3LjAwMDAwMCwgLTQ5LjAwMDAwMCkiIGZpbGw9IiNGRkZGRkUiPgogICAgICAgICAgICA8ZyBpZD0iYmFubmVyLWJnIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgtMzc5LjAwMDAwMCwgLTE4Ny4wMDAwMDApIj4KICAgICAgICAgICAgICAgIDxnIGlkPSJoZWFkZXIiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDU5Ny4wMDAwMDAsIDIxOC4wMDAwMDApIj4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTMxMC40OTgwMiwxOCBDMTI5OC42MjcxMiwxOCAxMjg5LDI3LjYzOTg4MzEgMTI4OSwzOS41MzIxMTIzIEMxMjg5LDQ5LjA0NTEwMjYgMTI5NS4xNTk4Myw1Ny4xMTQ2ODggMTMwMy43MDMzNCw1OS45NjE4NDM5IEMxMzA0Ljc3OTAzLDYwLjE2MDExMzggMTMwNS4xNzEwMyw1OS40OTUyNDg3IDEzMDUuMTcxMDMsNTguOTI0MjMxMyBDMTMwNS4xNzEwMyw1OC40MTI2OTUgMTMwNS4xNTI1NSw1Ny4wNTkxNzI0IDEzMDUuMTQxOTksNTUuMjYyODQ3IEMxMjk5LjE2MTY3LDU2LjU2MzQ5NzYgMTI5Ny44OTk4Nyw1Mi4zNzYwMzcxIDEyOTcuODk5ODcsNTIuMzc2MDM3MSBDMTI5Ni45MjE4NSw0OS44ODg0MTA2IDEyOTUuNTEyMjMsNDkuMjI2MTg5MSAxMjk1LjUxMjIzLDQ5LjIyNjE4OTEgQzEyOTMuNTYwMTUsNDcuODkxMTcxNyAxMjk1LjY2MDA2LDQ3LjkxNzYwNzcgMTI5NS42NjAwNiw0Ny45MTc2MDc3IEMxMjk3LjgxODA0LDQ4LjA2OTYxNDYgMTI5OC45NTMxMyw1MC4xMzY5MDg5IDEyOTguOTUzMTMsNTAuMTM2OTA4OSBDMTMwMC44NzA5LDUzLjQyNjg2NzYgMTMwMy45ODU3OSw1Mi40NzY0OTM4IDEzMDUuMjEwNjMsNTEuOTI1MzAzNSBDMTMwNS40MDU5Nyw1MC41MzQ3NzA1IDEzMDUuOTYxNjMsNDkuNTg1NzE4NiAxMzA2LjU3NTM3LDQ5LjA0Nzc0NjIgQzEzMDEuODAxNDEsNDguNTA0NDg2NiAxMjk2Ljc4MTk1LDQ2LjY1NjYxMTEgMTI5Ni43ODE5NSwzOC40MDU5MzkyIEMxMjk2Ljc4MTk1LDM2LjA1NTc3OTkgMTI5Ny42MjAwNiwzNC4xMzI1NjE3IDEyOTguOTk1MzcsMzIuNjI4MzU0IEMxMjk4Ljc3MzYzLDMyLjA4Mzc3MjYgMTI5OC4wMzU4MiwyOS44OTM1NTEgMTI5OS4yMDY1NCwyNi45MzAwNzY4IEMxMjk5LjIwNjU0LDI2LjkzMDA3NjggMTMwMS4wMTA4LDI2LjM1MTEyODYgMTMwNS4xMTgyNCwyOS4xMzc0ODE4IEMxMzA2LjgzMjc1LDI4LjY1ODk5MDQgMTMwOC42NzI2NCwyOC40MjEwNjY1IDEzMTAuNTAwNjYsMjguNDExODEzOSBDMTMxMi4zMjczNiwyOC40MjEwNjY1IDEzMTQuMTY1OTQsMjguNjU4OTkwNCAxMzE1Ljg4MzA4LDI5LjEzNzQ4MTggQzEzMTkuOTg3ODgsMjYuMzUxMTI4NiAxMzIxLjc4OTUsMjYuOTMwMDc2OCAxMzIxLjc4OTUsMjYuOTMwMDc2OCBDMTMyMi45NjI4NiwyOS44OTM1NTEgMTMyMi4yMjUwNSwzMi4wODM3NzI2IDEzMjIuMDA0NjMsMzIuNjI4MzU0IEMxMzIzLjM4MjU4LDM0LjEzMjU2MTcgMTMyNC4yMTQwOSwzNi4wNTU3Nzk5IDEzMjQuMjE0MDksMzguNDA1OTM5MiBDMTMyNC4yMTQwOSw0Ni42Nzc3NTk5IDEzMTkuMTg2NzIsNDguNDk3ODc3NiAxMzE0LjM5ODIzLDQ5LjAzMDU2MjggQzEzMTUuMTY5MDQsNDkuNjk1NDI3OSAxMzE1Ljg1NjY5LDUxLjAwOTI5NjUgMTMxNS44NTY2OSw1My4wMTcxMDk4IEMxMzE1Ljg1NjY5LDU1Ljg5NTk4ODkgMTMxNS44MzAyOSw1OC4yMTgzOTA1IDEzMTUuODMwMjksNTguOTI0MjMxMyBDMTMxNS44MzAyOSw1OS41MDA1MzU5IDEzMTYuMjE4MzMsNjAuMTcwNjg4MiAxMzE3LjMwODU0LDU5Ljk2MDUyMjEgQzEzMjUuODQ1NDUsNTcuMTA2NzU3MiAxMzMyLDQ5LjA0MjQ1OSAxMzMyLDM5LjUzMjExMjMgQzEzMzIsMjcuNjM5ODgzMSAxMzIyLjM3Mjg4LDE4IDEzMTAuNDk4MDIsMTgiIGlkPSJGaWxsLTQ5Ij48L3BhdGg+CiAgICAgICAgICAgICAgICA8L2c+CiAgICAgICAgICAgIDwvZz4KICAgICAgICA8L2c+CiAgICA8L2c+Cjwvc3ZnPg=="
                        class="github-logo">
                        GitHub
                    </div>
                    <div class="right"><img
                        src="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPHN2ZyB3aWR0aD0iMjFweCIgaGVpZ2h0PSIxOXB4IiB2aWV3Qm94PSIwIDAgMjEgMTkiIHZlcnNpb249IjEuMSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayI+CiAgICA8IS0tIEdlbmVyYXRvcjogU2tldGNoIDYxLjIgKDg5NjUzKSAtIGh0dHBzOi8vc2tldGNoLmNvbSAtLT4KICAgIDx0aXRsZT5QYXRoPC90aXRsZT4KICAgIDxkZXNjPkNyZWF0ZWQgd2l0aCBTa2V0Y2guPC9kZXNjPgogICAgPGcgaWQ9IlYzLeacgOaWsOeov+S7tiIgc3Ryb2tlPSJub25lIiBzdHJva2Utd2lkdGg9IjEiIGZpbGw9Im5vbmUiIGZpbGwtcnVsZT0iZXZlbm9kZCI+CiAgICAgICAgPGcgaWQ9IkhPTUUtdjMiIHRyYW5zZm9ybT0idHJhbnNsYXRlKC0xNTYxLjAwMDAwMCwgLTYwLjAwMDAwMCkiIGZpbGw9IiNGOEQyMzAiPgogICAgICAgICAgICA8ZyBpZD0iYmFubmVyLWJnIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgtMzc5LjAwMDAwMCwgLTE4Ny4wMDAwMDApIj4KICAgICAgICAgICAgICAgIDxnIGlkPSJoZWFkZXIiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDU5Ny4wMDAwMDAsIDIxOC4wMDAwMDApIj4KICAgICAgICAgICAgICAgICAgICA8ZyBpZD0ibGFiZWwtY29weS0xMiIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMTI4OS4wMDAwMDAsIDE4LjAwMDAwMCkiPgogICAgICAgICAgICAgICAgICAgICAgICA8cG9seWdvbiBpZD0iUGF0aCIgcG9pbnRzPSI2MS4wNTQzNTQzIDE3Ljc1NzM4MzYgNTQuMjE1MjQ2NiAxOC4zMTMzOTI5IDU5Ljg4OTM1MTcgMjIuOTczNzM4NyA1Ny43ODQ1MjI4IDI5Ljg0MDExODQgNjQuNDQyNTI3MSAyNi41NDM0MTg4IDcwLjU3NzcyMzkgMjkuODQwMTE4NCA2OS4yMzA0MzI1IDIyLjk3MzczODcgNzQuNzMyNTY5NiAxOC4zMTMzOTI5IDY3Ljg5MzQ2MiAxNy43NTczODM2IDY0LjQ0MjUyNzEgMTEuMzc1Ij48L3BvbHlnb24+CiAgICAgICAgICAgICAgICAgICAgPC9nPgogICAgICAgICAgICAgICAgPC9nPgogICAgICAgICAgICA8L2c+CiAgICAgICAgPC9nPgogICAgPC9nPgo8L3N2Zz4=">
                        <span id="github-star-num"></span>
                    </div>
                </a>
            </div>
        </nav>
    </div>

    <div id="sidenav" class="sidenav sidenav-fixed">
        <p class="caption"><span class="caption-text">Tutorials</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../tutorials.html">Tutorials</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../tutorials/announcement.html">官宣：Python 异步编程再添一利器</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../tutorials/tutorial.html">GINO Basics</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../tutorials/fastapi.html">Build a FastAPI Server</a></li>
</ul>
<p class="caption"><span class="caption-text">How-to Guides</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../how-to.html">How-to Guides</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../how-to/alembic.html">Use Alembic</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../how-to/bakery.html">Bake Queries</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../how-to/contributing.html">Contributing</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../how-to/crud.html">CRUD</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../how-to/faq.html">Frequently Asked Questions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../how-to/json-props.html">JSON Property</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../how-to/loaders.html">Loaders and Relationship</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../how-to/pool.html">Connection Pool</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../how-to/schema.html">Schema Declaration</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../how-to/transaction.html">Transaction</a></li>
</ul>
<p class="caption"><span class="caption-text">Explanation</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../explanation.html">Explanation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../explanation/async.html">Asynchronous Programming 101</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../explanation/engine.html">Engine and Connection</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../explanation/sa20.html">SQLAlchemy 2.0</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../explanation/why.html">Why Asynchronous ORM?</a></li>
</ul>
<p class="caption"><span class="caption-text">Reference</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="../../reference.html">Reference</a><ul class="current">
<li class="toctree-l2 current"><a class="reference internal" href="../api.html">API Reference</a></li>
<li class="toctree-l2"><a class="reference internal" href="../extensions.html">Extensions</a></li>
<li class="toctree-l2"><a class="reference internal" href="../history.html">History</a></li>
</ul>
</li>
<li class="toctree-l1 current"><a class="reference internal" href="../api.html">API Reference</a><ul class="current">
<li class="toctree-l2 current"><a class="reference internal" href="gino.html">gino package</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../extensions.html">Extensions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../history.html">History</a></li>
</ul>

    </div>
</header>

<main>
    <div class="row">
        <div class="col s12 m9 body">
            <div id="main-content" role="main">
                
    <div class="section" id="module-gino.engine">
<span id="gino-engine-module"></span><h1>gino.engine module<a class="headerlink" href="#module-gino.engine" title="Permalink to this headline">¶</a></h1>
<dl class="py class">
<dt id="gino.engine.GinoConnection">
<em class="property">class </em><code class="sig-prename descclassname">gino.engine.</code><code class="sig-name descname">GinoConnection</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">dialect</span></em>, <em class="sig-param"><span class="n">sa_conn</span></em>, <em class="sig-param"><span class="n">stack</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="headerlink" href="#gino.engine.GinoConnection" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference external" href="https://docs.python.org/3/library/functions.html#object" title="(in Python v3.9)"><code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></a></p>
<p>Represents an actual database connection.</p>
<p>This is the root of all query API like <a class="reference internal" href="#gino.engine.GinoConnection.all" title="gino.engine.GinoConnection.all"><code class="xref py py-meth docutils literal notranslate"><span class="pre">all()</span></code></a>, <a class="reference internal" href="#gino.engine.GinoConnection.first" title="gino.engine.GinoConnection.first"><code class="xref py py-meth docutils literal notranslate"><span class="pre">first()</span></code></a>,
<a class="reference internal" href="#gino.engine.GinoConnection.one" title="gino.engine.GinoConnection.one"><code class="xref py py-meth docutils literal notranslate"><span class="pre">one()</span></code></a>, <a class="reference internal" href="#gino.engine.GinoConnection.one_or_none" title="gino.engine.GinoConnection.one_or_none"><code class="xref py py-meth docutils literal notranslate"><span class="pre">one_or_none()</span></code></a>, <a class="reference internal" href="#gino.engine.GinoConnection.scalar" title="gino.engine.GinoConnection.scalar"><code class="xref py py-meth docutils literal notranslate"><span class="pre">scalar()</span></code></a> or <a class="reference internal" href="#gino.engine.GinoConnection.status" title="gino.engine.GinoConnection.status"><code class="xref py py-meth docutils literal notranslate"><span class="pre">status()</span></code></a>,
those on engine or query are simply wrappers of methods in this class.</p>
<p>Usually instances of this class are created by <a class="reference internal" href="#gino.engine.GinoEngine.acquire" title="gino.engine.GinoEngine.acquire"><code class="xref py py-meth docutils literal notranslate"><span class="pre">GinoEngine.acquire()</span></code></a>.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p><a class="reference internal" href="#gino.engine.GinoConnection" title="gino.engine.GinoConnection"><code class="xref py py-class docutils literal notranslate"><span class="pre">GinoConnection</span></code></a> may refer to zero or one underlying database
connection - when a <a class="reference internal" href="#gino.engine.GinoConnection" title="gino.engine.GinoConnection"><code class="xref py py-class docutils literal notranslate"><span class="pre">GinoConnection</span></code></a> is acquired with
<code class="docutils literal notranslate"><span class="pre">lazy=True</span></code>, the underlying connection may still be in the pool,
until a query API is called or <a class="reference internal" href="#gino.engine.GinoConnection.get_raw_connection" title="gino.engine.GinoConnection.get_raw_connection"><code class="xref py py-meth docutils literal notranslate"><span class="pre">get_raw_connection()</span></code></a> is called.</p>
<p>Oppositely, one underlying database connection can be shared by many
<a class="reference internal" href="#gino.engine.GinoConnection" title="gino.engine.GinoConnection"><code class="xref py py-class docutils literal notranslate"><span class="pre">GinoConnection</span></code></a> instances when they are acquired with
<code class="docutils literal notranslate"><span class="pre">reuse=True</span></code>. The actual database connection is only returned to the
pool when the <strong>root</strong> <a class="reference internal" href="#gino.engine.GinoConnection" title="gino.engine.GinoConnection"><code class="xref py py-class docutils literal notranslate"><span class="pre">GinoConnection</span></code></a> is released. Read more
in <a class="reference internal" href="#gino.engine.GinoEngine.acquire" title="gino.engine.GinoEngine.acquire"><code class="xref py py-meth docutils literal notranslate"><span class="pre">GinoEngine.acquire()</span></code></a> method.</p>
</div>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="../../explanation/engine.html"><span class="doc">Engine and Connection</span></a></p>
</div>
<dl class="py method">
<dt id="gino.engine.GinoConnection.all">
<em class="property">async </em><code class="sig-name descname">all</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">clause</span></em>, <em class="sig-param"><span class="o">*</span><span class="n">multiparams</span></em>, <em class="sig-param"><span class="o">**</span><span class="n">params</span></em><span class="sig-paren">)</span><a class="headerlink" href="#gino.engine.GinoConnection.all" title="Permalink to this definition">¶</a></dt>
<dd><p>Runs the given query in database, returns all results as a list.</p>
<p>This method accepts the same parameters taken by SQLAlchemy
<a class="reference external" href="https://docs.sqlalchemy.org/en/13/core/connections.html#sqlalchemy.engine.Connectable.execute" title="(in SQLAlchemy v1.3)"><code class="xref py py-meth docutils literal notranslate"><span class="pre">execute()</span></code></a>. You can pass in a raw
SQL string, or <em>any</em> SQLAlchemy query clauses.</p>
<p>If the given query clause is built by CRUD models, then the returning
rows will be turned into relevant model objects (Only one type of model
per query is supported for now, no relationship support yet). See
<a class="reference internal" href="#gino.engine.GinoConnection.execution_options" title="gino.engine.GinoConnection.execution_options"><code class="xref py py-meth docutils literal notranslate"><span class="pre">execution_options()</span></code></a> for more information.</p>
<p>If the given parameters are parsed as “executemany” - bulk inserting
multiple rows in one call for example, the returning result from
database will be discarded and this method will return <code class="docutils literal notranslate"><span class="pre">None</span></code>.</p>
</dd></dl>

<dl class="py method">
<dt id="gino.engine.GinoConnection.dialect">
<em class="property">property </em><code class="sig-name descname">dialect</code><a class="headerlink" href="#gino.engine.GinoConnection.dialect" title="Permalink to this definition">¶</a></dt>
<dd><p>The <a class="reference external" href="https://docs.sqlalchemy.org/en/13/core/internals.html#sqlalchemy.engine.interfaces.Dialect" title="(in SQLAlchemy v1.3)"><code class="xref py py-class docutils literal notranslate"><span class="pre">Dialect</span></code></a> in use, inherited
from the engine created this connection.</p>
</dd></dl>

<dl class="py method">
<dt id="gino.engine.GinoConnection.execution_options">
<code class="sig-name descname">execution_options</code><span class="sig-paren">(</span><em class="sig-param"><span class="o">**</span><span class="n">opt</span></em><span class="sig-paren">)</span><a class="headerlink" href="#gino.engine.GinoConnection.execution_options" title="Permalink to this definition">¶</a></dt>
<dd><p>Set non-SQL options for the connection which take effect during
execution.</p>
<p>This method returns a copy of this <a class="reference internal" href="#gino.engine.GinoConnection" title="gino.engine.GinoConnection"><code class="xref py py-class docutils literal notranslate"><span class="pre">GinoConnection</span></code></a> which
references the same underlying database connection, but with the given
execution options set on the copy. Therefore, it is a good practice to
discard the copy immediately after use, for example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">row</span> <span class="o">=</span> <span class="k">await</span> <span class="n">conn</span><span class="o">.</span><span class="n">execution_options</span><span class="p">(</span><span class="n">model</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span><span class="o">.</span><span class="n">first</span><span class="p">(</span><span class="n">User</span><span class="o">.</span><span class="n">query</span><span class="p">)</span>
</pre></div>
</div>
<p>This is very much the same as SQLAlchemy
<code class="xref py py-meth docutils literal notranslate"><span class="pre">execution_options()</span></code>, it
actually does pass the execution options to the underlying SQLAlchemy
<code class="xref py py-class docutils literal notranslate"><span class="pre">Connection</span></code>. Furthermore, GINO added a
few execution options:</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>return_model</strong> – Boolean to control whether the returning results
should be loaded into model instances, where the model class is
defined in another execution option <code class="docutils literal notranslate"><span class="pre">model</span></code>. Default is <code class="docutils literal notranslate"><span class="pre">True</span></code>.</p></li>
<li><p><strong>model</strong> – Specifies the type of model instance to create on return.
This has no effect if <code class="docutils literal notranslate"><span class="pre">return_model</span></code> is set to <code class="docutils literal notranslate"><span class="pre">False</span></code>. Usually
in queries built by CRUD models, this execution option is
automatically set. For now, GINO only supports loading each row into
one type of model object, relationships are not supported. Please use
multiple queries for that. <code class="docutils literal notranslate"><span class="pre">None</span></code> for no postprocessing (default).</p></li>
<li><p><strong>timeout</strong> – Seconds to wait for the query to finish. <code class="docutils literal notranslate"><span class="pre">None</span></code> for
no time out (default).</p></li>
<li><p><strong>loader</strong> – <p>A loader expression to load the database rows into
specified objective structure. It can be either:</p>
<ul>
<li><p>A model class, so that the query will yield model instances of this
class. It is your responsibility to make sure all the columns of
this model is selected in the query.</p></li>
<li><p>A <a class="reference external" href="https://docs.sqlalchemy.org/en/13/core/metadata.html#sqlalchemy.schema.Column" title="(in SQLAlchemy v1.3)"><code class="xref py py-class docutils literal notranslate"><span class="pre">Column</span></code></a> instance, so that each result
will be only a single value of this column. Please note, if you
want to achieve fetching the very first value, you should use
<a class="reference internal" href="#gino.engine.GinoConnection.first" title="gino.engine.GinoConnection.first"><code class="xref py py-meth docutils literal notranslate"><span class="pre">first()</span></code></a> instead of
<a class="reference internal" href="#gino.engine.GinoConnection.scalar" title="gino.engine.GinoConnection.scalar"><code class="xref py py-meth docutils literal notranslate"><span class="pre">scalar()</span></code></a>. However, using directly
<a class="reference internal" href="#gino.engine.GinoConnection.scalar" title="gino.engine.GinoConnection.scalar"><code class="xref py py-meth docutils literal notranslate"><span class="pre">scalar()</span></code></a> is a more direct way.</p></li>
<li><p>A tuple nesting more loader expressions recursively.</p></li>
<li><p>A <a class="reference external" href="https://docs.python.org/3/library/functions.html#callable" title="(in Python v3.9)"><code class="xref py py-func docutils literal notranslate"><span class="pre">callable()</span></code></a> function that will be called for each row to
fully customize the result. Two positional arguments will be passed
to the function: the first is the <a class="reference external" href="https://docs.sqlalchemy.org/en/13/core/connections.html#sqlalchemy.engine.RowProxy" title="(in SQLAlchemy v1.3)"><code class="xref py py-class docutils literal notranslate"><span class="pre">row</span></code></a> instance, the second is a context
object which is only present if nested else <code class="docutils literal notranslate"><span class="pre">None</span></code>.</p></li>
<li><p>A <a class="reference internal" href="gino.loader.html#gino.loader.Loader" title="gino.loader.Loader"><code class="xref py py-class docutils literal notranslate"><span class="pre">Loader</span></code></a> instance directly.</p></li>
<li><p>Anything else will be treated as literal values thus returned as
whatever they are.</p></li>
</ul>
</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="gino.engine.GinoConnection.first">
<em class="property">async </em><code class="sig-name descname">first</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">clause</span></em>, <em class="sig-param"><span class="o">*</span><span class="n">multiparams</span></em>, <em class="sig-param"><span class="o">**</span><span class="n">params</span></em><span class="sig-paren">)</span><a class="headerlink" href="#gino.engine.GinoConnection.first" title="Permalink to this definition">¶</a></dt>
<dd><p>Runs the given query in database, returns the first result.</p>
<p>If the query returns no result, this method will return <code class="docutils literal notranslate"><span class="pre">None</span></code>.</p>
<p>See <a class="reference internal" href="#gino.engine.GinoConnection.all" title="gino.engine.GinoConnection.all"><code class="xref py py-meth docutils literal notranslate"><span class="pre">all()</span></code></a> for common query comments.</p>
</dd></dl>

<dl class="py method">
<dt id="gino.engine.GinoConnection.get_raw_connection">
<em class="property">async </em><code class="sig-name descname">get_raw_connection</code><span class="sig-paren">(</span><em class="sig-param"><span class="o">*</span></em>, <em class="sig-param"><span class="n">timeout</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="headerlink" href="#gino.engine.GinoConnection.get_raw_connection" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the underlying database connection, acquire one if none present.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>timeout</strong> – Seconds to wait for the underlying acquiring</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Underlying database connection instance depending on the
dialect in use</p>
</dd>
<dt class="field-odd">Raises</dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/asyncio-exceptions.html#asyncio.TimeoutError" title="(in Python v3.9)"><code class="xref py py-class docutils literal notranslate"><span class="pre">TimeoutError</span></code></a> if the acquiring timed out</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="gino.engine.GinoConnection.iterate">
<code class="sig-name descname">iterate</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">clause</span></em>, <em class="sig-param"><span class="o">*</span><span class="n">multiparams</span></em>, <em class="sig-param"><span class="o">**</span><span class="n">params</span></em><span class="sig-paren">)</span><a class="headerlink" href="#gino.engine.GinoConnection.iterate" title="Permalink to this definition">¶</a></dt>
<dd><p>Creates a server-side cursor in database for large query results.</p>
<p>Cursors must work within transactions:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">async</span> <span class="k">with</span> <span class="n">conn</span><span class="o">.</span><span class="n">transaction</span><span class="p">():</span>
    <span class="k">async</span> <span class="k">for</span> <span class="n">user</span> <span class="ow">in</span> <span class="n">conn</span><span class="o">.</span><span class="n">iterate</span><span class="p">(</span><span class="n">User</span><span class="o">.</span><span class="n">query</span><span class="p">):</span>
        <span class="c1"># handle each user without loading all users into memory</span>
</pre></div>
</div>
<p>Alternatively, you can manually control how the cursor works:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">async</span> <span class="k">with</span> <span class="n">conn</span><span class="o">.</span><span class="n">transaction</span><span class="p">():</span>
    <span class="n">cursor</span> <span class="o">=</span> <span class="k">await</span> <span class="n">conn</span><span class="o">.</span><span class="n">iterate</span><span class="p">(</span><span class="n">User</span><span class="o">.</span><span class="n">query</span><span class="p">)</span>
    <span class="n">user</span> <span class="o">=</span> <span class="k">await</span> <span class="n">cursor</span><span class="o">.</span><span class="n">next</span><span class="p">()</span>
    <span class="n">users</span> <span class="o">=</span> <span class="k">await</span> <span class="n">cursor</span><span class="o">.</span><span class="n">many</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span>
</pre></div>
</div>
<p>Read more about how <a class="reference internal" href="gino.dialects.base.html#gino.dialects.base.Cursor" title="gino.dialects.base.Cursor"><code class="xref py py-class docutils literal notranslate"><span class="pre">Cursor</span></code></a> works.</p>
<p>Similarly, this method takes the same parameters as <a class="reference internal" href="#gino.engine.GinoConnection.all" title="gino.engine.GinoConnection.all"><code class="xref py py-meth docutils literal notranslate"><span class="pre">all()</span></code></a>.</p>
</dd></dl>

<dl class="py method">
<dt id="gino.engine.GinoConnection.one">
<em class="property">async </em><code class="sig-name descname">one</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">clause</span></em>, <em class="sig-param"><span class="o">*</span><span class="n">multiparams</span></em>, <em class="sig-param"><span class="o">**</span><span class="n">params</span></em><span class="sig-paren">)</span><a class="headerlink" href="#gino.engine.GinoConnection.one" title="Permalink to this definition">¶</a></dt>
<dd><p>Runs the given query in database, returns exactly one result.</p>
<p>If the query returns no result, this method will raise
<a class="reference internal" href="gino.exceptions.html#gino.exceptions.NoResultFound" title="gino.exceptions.NoResultFound"><code class="xref py py-class docutils literal notranslate"><span class="pre">NoResultFound</span></code></a>.
If the query returns multiple results, this method will raise
<a class="reference internal" href="gino.exceptions.html#gino.exceptions.MultipleResultsFound" title="gino.exceptions.MultipleResultsFound"><code class="xref py py-class docutils literal notranslate"><span class="pre">MultipleResultsFound</span></code></a>.</p>
<p>See <a class="reference internal" href="#gino.engine.GinoConnection.all" title="gino.engine.GinoConnection.all"><code class="xref py py-meth docutils literal notranslate"><span class="pre">all()</span></code></a> for common query comments.</p>
</dd></dl>

<dl class="py method">
<dt id="gino.engine.GinoConnection.one_or_none">
<em class="property">async </em><code class="sig-name descname">one_or_none</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">clause</span></em>, <em class="sig-param"><span class="o">*</span><span class="n">multiparams</span></em>, <em class="sig-param"><span class="o">**</span><span class="n">params</span></em><span class="sig-paren">)</span><a class="headerlink" href="#gino.engine.GinoConnection.one_or_none" title="Permalink to this definition">¶</a></dt>
<dd><p>Runs the given query in database, returns at most one result.</p>
<p>If the query returns no result, this method will return <code class="docutils literal notranslate"><span class="pre">None</span></code>.
If the query returns multiple results, this method will raise
<a class="reference internal" href="gino.exceptions.html#gino.exceptions.MultipleResultsFound" title="gino.exceptions.MultipleResultsFound"><code class="xref py py-class docutils literal notranslate"><span class="pre">MultipleResultsFound</span></code></a>.</p>
<p>See <a class="reference internal" href="#gino.engine.GinoConnection.all" title="gino.engine.GinoConnection.all"><code class="xref py py-meth docutils literal notranslate"><span class="pre">all()</span></code></a> for common query comments.</p>
</dd></dl>

<dl class="py method">
<dt id="gino.engine.GinoConnection.prepare">
<em class="property">async </em><code class="sig-name descname">prepare</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">clause</span></em><span class="sig-paren">)</span><a class="headerlink" href="#gino.engine.GinoConnection.prepare" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="gino.engine.GinoConnection.raw_connection">
<em class="property">property </em><code class="sig-name descname">raw_connection</code><a class="headerlink" href="#gino.engine.GinoConnection.raw_connection" title="Permalink to this definition">¶</a></dt>
<dd><p>The current underlying database connection instance, type depends on
the dialect in use. May be <code class="docutils literal notranslate"><span class="pre">None</span></code> if self is a lazy connection.</p>
</dd></dl>

<dl class="py method">
<dt id="gino.engine.GinoConnection.release">
<em class="property">async </em><code class="sig-name descname">release</code><span class="sig-paren">(</span><em class="sig-param"><span class="o">*</span></em>, <em class="sig-param"><span class="n">permanent</span><span class="o">=</span><span class="default_value">True</span></em><span class="sig-paren">)</span><a class="headerlink" href="#gino.engine.GinoConnection.release" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the underlying database connection to its pool.</p>
<p>If <code class="docutils literal notranslate"><span class="pre">permanent=False</span></code>, this connection will be set in lazy mode with
underlying database connection returned, the next query on this
connection will cause a new database connection acquired. This is
useful when this connection may still be useful again later, while some
long-running I/O operations are about to take place, which should not
take up one database connection or even transaction for that long time.</p>
<p>Otherwise with <code class="docutils literal notranslate"><span class="pre">permanent=True</span></code> (default), this connection will be
marked as closed after returning to pool, and be no longer usable
again.</p>
<p>If this connection is a reusing connection, then only this connection
is closed (depending on <code class="docutils literal notranslate"><span class="pre">permanent</span></code>), the reused underlying
connection will <strong>not</strong> be returned back to the pool.</p>
<p>Practically it is recommended to return connections in the reversed
order as they are borrowed, but if this connection is a reused
connection with still other opening connections reusing it, then on
release the underlying connection <strong>will be</strong> returned to the pool,
with all the reusing connections losing an available underlying
connection. The availability of further operations on those reusing
connections depends on the given <code class="docutils literal notranslate"><span class="pre">permanent</span></code> value.</p>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="#gino.engine.GinoEngine.acquire" title="gino.engine.GinoEngine.acquire"><code class="xref py py-meth docutils literal notranslate"><span class="pre">GinoEngine.acquire()</span></code></a></p>
</div>
</dd></dl>

<dl class="py method">
<dt id="gino.engine.GinoConnection.scalar">
<em class="property">async </em><code class="sig-name descname">scalar</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">clause</span></em>, <em class="sig-param"><span class="o">*</span><span class="n">multiparams</span></em>, <em class="sig-param"><span class="o">**</span><span class="n">params</span></em><span class="sig-paren">)</span><a class="headerlink" href="#gino.engine.GinoConnection.scalar" title="Permalink to this definition">¶</a></dt>
<dd><p>Runs the given query in database, returns the first result.</p>
<p>If the query returns no result, this method will return <code class="docutils literal notranslate"><span class="pre">None</span></code>.</p>
<p>See <a class="reference internal" href="#gino.engine.GinoConnection.all" title="gino.engine.GinoConnection.all"><code class="xref py py-meth docutils literal notranslate"><span class="pre">all()</span></code></a> for common query comments.</p>
</dd></dl>

<dl class="py attribute">
<dt id="gino.engine.GinoConnection.schema_for_object">
<code class="sig-name descname">schema_for_object</code><em class="property"> = &lt;sqlalchemy.sql.schema._SchemaTranslateMap object&gt;</em><a class="headerlink" href="#gino.engine.GinoConnection.schema_for_object" title="Permalink to this definition">¶</a></dt>
<dd><p>A SQLAlchemy compatibility attribute, don’t use it for now, it bites.</p>
</dd></dl>

<dl class="py method">
<dt id="gino.engine.GinoConnection.status">
<em class="property">async </em><code class="sig-name descname">status</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">clause</span></em>, <em class="sig-param"><span class="o">*</span><span class="n">multiparams</span></em>, <em class="sig-param"><span class="o">**</span><span class="n">params</span></em><span class="sig-paren">)</span><a class="headerlink" href="#gino.engine.GinoConnection.status" title="Permalink to this definition">¶</a></dt>
<dd><p>Runs the given query in database, returns the query status.</p>
<p>The returning query status depends on underlying database and the
dialect in use. For asyncpg it is a string, you can parse it like this:
<a class="reference external" href="https://git.io/v7oze">https://git.io/v7oze</a></p>
</dd></dl>

<dl class="py method">
<dt id="gino.engine.GinoConnection.transaction">
<code class="sig-name descname">transaction</code><span class="sig-paren">(</span><em class="sig-param"><span class="o">*</span><span class="n">args</span></em>, <em class="sig-param"><span class="o">**</span><span class="n">kwargs</span></em><span class="sig-paren">)</span><a class="headerlink" href="#gino.engine.GinoConnection.transaction" title="Permalink to this definition">¶</a></dt>
<dd><p>Starts a database transaction.</p>
<p>There are two ways using this method: <strong>managed</strong> as an asynchronous
context manager:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">async</span> <span class="k">with</span> <span class="n">conn</span><span class="o">.</span><span class="n">transaction</span><span class="p">()</span> <span class="k">as</span> <span class="n">tx</span><span class="p">:</span>
    <span class="c1"># run query in transaction</span>
</pre></div>
</div>
<p>or <strong>manually</strong> awaited:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">tx</span> <span class="o">=</span> <span class="k">await</span> <span class="n">conn</span><span class="o">.</span><span class="n">transaction</span><span class="p">()</span>
<span class="k">try</span><span class="p">:</span>
    <span class="c1"># run query in transaction</span>
    <span class="k">await</span> <span class="n">tx</span><span class="o">.</span><span class="n">commit</span><span class="p">()</span>
<span class="k">except</span> <span class="ne">Exception</span><span class="p">:</span>
    <span class="k">await</span> <span class="n">tx</span><span class="o">.</span><span class="n">rollback</span><span class="p">()</span>
    <span class="k">raise</span>
</pre></div>
</div>
<p>Where the <code class="docutils literal notranslate"><span class="pre">tx</span></code> is an instance of the
<a class="reference internal" href="gino.transaction.html#gino.transaction.GinoTransaction" title="gino.transaction.GinoTransaction"><code class="xref py py-class docutils literal notranslate"><span class="pre">GinoTransaction</span></code></a> class, feel free to read
more about it.</p>
<p>In the first managed mode, the transaction is automatically committed
on exiting the context block, or rolled back if an exception was raised
which led to the exit of the context. In the second manual mode, you’ll
need to manually call the
<a class="reference internal" href="gino.transaction.html#gino.transaction.GinoTransaction.commit" title="gino.transaction.GinoTransaction.commit"><code class="xref py py-meth docutils literal notranslate"><span class="pre">commit()</span></code></a> or
<a class="reference internal" href="gino.transaction.html#gino.transaction.GinoTransaction.rollback" title="gino.transaction.GinoTransaction.rollback"><code class="xref py py-meth docutils literal notranslate"><span class="pre">rollback()</span></code></a> methods on need.</p>
<p>If this is a lazy connection, entering a transaction will cause a new
database connection acquired if none was present.</p>
<p>Transactions may support nesting depending on the dialect in use. For
example in asyncpg, starting a second transaction on the same
connection will create a save point in the database.</p>
<p>For now, the parameters are directly passed to underlying database
driver, read <a class="reference external" href="https://magicstack.github.io/asyncpg/current/api/index.html#asyncpg.connection.Connection.transaction" title="(in asyncpg v0.21.0)"><code class="xref py py-meth docutils literal notranslate"><span class="pre">asyncpg.connection.Connection.transaction()</span></code></a> for
asyncpg.</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt id="gino.engine.GinoEngine">
<em class="property">class </em><code class="sig-prename descclassname">gino.engine.</code><code class="sig-name descname">GinoEngine</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">dialect</span></em>, <em class="sig-param"><span class="n">pool</span></em>, <em class="sig-param"><span class="n">loop</span></em>, <em class="sig-param"><span class="n">logging_name</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">echo</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">execution_options</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="headerlink" href="#gino.engine.GinoEngine" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference external" href="https://docs.python.org/3/library/functions.html#object" title="(in Python v3.9)"><code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></a></p>
<p>Connects a <a class="reference internal" href="gino.dialects.base.html#gino.dialects.base.Pool" title="gino.dialects.base.Pool"><code class="xref py py-class docutils literal notranslate"><span class="pre">Pool</span></code></a> and
<a class="reference external" href="https://docs.sqlalchemy.org/en/13/core/internals.html#sqlalchemy.engine.interfaces.Dialect" title="(in SQLAlchemy v1.3)"><code class="xref py py-class docutils literal notranslate"><span class="pre">Dialect</span></code></a> together to provide a source
of database connectivity and behavior.</p>
<p>A <a class="reference internal" href="#gino.engine.GinoEngine" title="gino.engine.GinoEngine"><code class="xref py py-class docutils literal notranslate"><span class="pre">GinoEngine</span></code></a> object is instantiated publicly using the
<a class="reference internal" href="gino.html#gino.create_engine" title="gino.create_engine"><code class="xref py py-func docutils literal notranslate"><span class="pre">gino.create_engine()</span></code></a> function or
<a class="reference internal" href="gino.api.html#gino.api.Gino.set_bind" title="gino.api.Gino.set_bind"><code class="xref py py-func docutils literal notranslate"><span class="pre">db.set_bind()</span></code></a> method.</p>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="../../explanation/engine.html"><span class="doc">Engine and Connection</span></a></p>
</div>
<dl class="py method">
<dt id="gino.engine.GinoEngine.acquire">
<code class="sig-name descname">acquire</code><span class="sig-paren">(</span><em class="sig-param"><span class="o">*</span></em>, <em class="sig-param"><span class="n">timeout</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">reuse</span><span class="o">=</span><span class="default_value">False</span></em>, <em class="sig-param"><span class="n">lazy</span><span class="o">=</span><span class="default_value">False</span></em>, <em class="sig-param"><span class="n">reusable</span><span class="o">=</span><span class="default_value">True</span></em><span class="sig-paren">)</span><a class="headerlink" href="#gino.engine.GinoEngine.acquire" title="Permalink to this definition">¶</a></dt>
<dd><p>Acquire a connection from the pool.</p>
<p>There are two ways using this method - as an asynchronous context
manager:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">async</span> <span class="k">with</span> <span class="n">engine</span><span class="o">.</span><span class="n">acquire</span><span class="p">()</span> <span class="k">as</span> <span class="n">conn</span><span class="p">:</span>
    <span class="c1"># play with the connection</span>
</pre></div>
</div>
<p>which will guarantee the connection is returned to the pool when
leaving the <code class="docutils literal notranslate"><span class="pre">async</span> <span class="pre">with</span></code> block; or as a coroutine:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">conn</span> <span class="o">=</span> <span class="k">await</span> <span class="n">engine</span><span class="o">.</span><span class="n">acquire</span><span class="p">()</span>
<span class="k">try</span><span class="p">:</span>
    <span class="c1"># play with the connection</span>
<span class="k">finally</span><span class="p">:</span>
    <span class="k">await</span> <span class="n">conn</span><span class="o">.</span><span class="n">release</span><span class="p">()</span>
</pre></div>
</div>
<p>where the connection should be manually returned to the pool with
<a class="reference internal" href="#gino.engine.GinoConnection.release" title="gino.engine.GinoConnection.release"><code class="xref py py-meth docutils literal notranslate"><span class="pre">conn.release()</span></code></a>.</p>
<p>Within the same context (usually the same <a class="reference external" href="https://docs.python.org/3/library/asyncio-task.html#asyncio.Task" title="(in Python v3.9)"><code class="xref py py-class docutils literal notranslate"><span class="pre">Task</span></code></a>, see
also <a class="reference internal" href="../../how-to/transaction.html"><span class="doc">Transaction</span></a>), a nesting acquire by default re</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>timeout</strong> – Block up to <code class="docutils literal notranslate"><span class="pre">timeout</span></code> seconds until there is one free
connection in the pool. Default is <code class="docutils literal notranslate"><span class="pre">None</span></code> - block forever until
succeeded. This has no effect when <code class="docutils literal notranslate"><span class="pre">lazy=True</span></code>, and depends on the
actual situation when <code class="docutils literal notranslate"><span class="pre">reuse=True</span></code>.</p></li>
<li><p><strong>reuse</strong> – Reuse the latest reusable acquired connection (before
it’s returned to the pool) in current context if there is one, or
borrow a new one if none present. Default is <code class="docutils literal notranslate"><span class="pre">False</span></code> for always
borrow a new one. This is useful when you are in a nested method call
series, wishing to use the same connection without passing it around
as parameters. See also: <a class="reference internal" href="../../how-to/transaction.html"><span class="doc">Transaction</span></a>. A reusing
connection is not reusable even if <code class="docutils literal notranslate"><span class="pre">reusable=True</span></code>. If the reused
connection happened to be a lazy one, then the reusing connection is
lazy too.</p></li>
<li><p><strong>lazy</strong> – Don’t acquire the actual underlying connection yet - do it
only when needed. Default is <code class="docutils literal notranslate"><span class="pre">False</span></code> for always do it immediately.
This is useful before entering a code block which may or may not make
use of a given connection object. Feeding in a lazy connection will
save the borrow-return job if the connection is never used. If
setting <code class="docutils literal notranslate"><span class="pre">reuse=True</span></code> at the same time, then the reused connection -
if any - applies the same laziness. For example, reusing a lazy
connection with <code class="docutils literal notranslate"><span class="pre">lazy=False</span></code> will cause the reused connection to
acquire an underlying connection immediately.</p></li>
<li><p><strong>reusable</strong> – Mark this connection as reusable or otherwise. This
has no effect if it is a reusing connection. All reusable connections
are placed in a stack, any reusing acquire operation will always
reuse the top (latest) reusable connection. One reusable connection
may be reused by several reusing connections - they all share one
same underlying connection. Acquiring a connection with
<code class="docutils literal notranslate"><span class="pre">reusable=False</span></code> and <code class="docutils literal notranslate"><span class="pre">reusing=False</span></code> makes it a cleanly isolated
connection which is only referenced once here.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>A <a class="reference internal" href="#gino.engine.GinoConnection" title="gino.engine.GinoConnection"><code class="xref py py-class docutils literal notranslate"><span class="pre">GinoConnection</span></code></a> object.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="gino.engine.GinoEngine.all">
<em class="property">async </em><code class="sig-name descname">all</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">clause</span></em>, <em class="sig-param"><span class="o">*</span><span class="n">multiparams</span></em>, <em class="sig-param"><span class="o">**</span><span class="n">params</span></em><span class="sig-paren">)</span><a class="headerlink" href="#gino.engine.GinoEngine.all" title="Permalink to this definition">¶</a></dt>
<dd><p>Acquires a connection with <code class="docutils literal notranslate"><span class="pre">reuse=True</span></code> and runs
<a class="reference internal" href="#gino.engine.GinoConnection.all" title="gino.engine.GinoConnection.all"><code class="xref py py-meth docutils literal notranslate"><span class="pre">all()</span></code></a> on it. <code class="docutils literal notranslate"><span class="pre">reuse=True</span></code> means you can safely
do this without borrowing more than one underlying connection:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">async</span> <span class="k">with</span> <span class="n">engine</span><span class="o">.</span><span class="n">acquire</span><span class="p">():</span>
    <span class="k">await</span> <span class="n">engine</span><span class="o">.</span><span class="n">all</span><span class="p">(</span><span class="s1">&#39;SELECT ...&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>The same applies for other query methods.</p>
</dd></dl>

<dl class="py method">
<dt id="gino.engine.GinoEngine.close">
<em class="property">async </em><code class="sig-name descname">close</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#gino.engine.GinoEngine.close" title="Permalink to this definition">¶</a></dt>
<dd><p>Close the engine, by closing the underlying pool.</p>
</dd></dl>

<dl class="py method">
<dt id="gino.engine.GinoEngine.compile">
<code class="sig-name descname">compile</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">clause</span></em>, <em class="sig-param"><span class="o">*</span><span class="n">multiparams</span></em>, <em class="sig-param"><span class="o">**</span><span class="n">params</span></em><span class="sig-paren">)</span><a class="headerlink" href="#gino.engine.GinoEngine.compile" title="Permalink to this definition">¶</a></dt>
<dd><p>A shortcut for <a class="reference internal" href="gino.dialects.base.html#gino.dialects.base.AsyncDialectMixin.compile" title="gino.dialects.base.AsyncDialectMixin.compile"><code class="xref py py-meth docutils literal notranslate"><span class="pre">compile()</span></code></a> on
the dialect, returns raw SQL string and parameters according to the
rules of the dialect.</p>
</dd></dl>

<dl class="py attribute">
<dt id="gino.engine.GinoEngine.connection_cls">
<code class="sig-name descname">connection_cls</code><a class="headerlink" href="#gino.engine.GinoEngine.connection_cls" title="Permalink to this definition">¶</a></dt>
<dd><p>Customizes the connection class to use, default is
<a class="reference internal" href="#gino.engine.GinoConnection" title="gino.engine.GinoConnection"><code class="xref py py-class docutils literal notranslate"><span class="pre">GinoConnection</span></code></a>.</p>
<p>alias of <a class="reference internal" href="#gino.engine.GinoConnection" title="gino.engine.GinoConnection"><code class="xref py py-class docutils literal notranslate"><span class="pre">GinoConnection</span></code></a></p>
</dd></dl>

<dl class="py method">
<dt id="gino.engine.GinoEngine.current_connection">
<em class="property">property </em><code class="sig-name descname">current_connection</code><a class="headerlink" href="#gino.engine.GinoEngine.current_connection" title="Permalink to this definition">¶</a></dt>
<dd><p>Gets the most recently acquired reusable connection in the context.
<code class="docutils literal notranslate"><span class="pre">None</span></code> if there is no such connection.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p><a class="reference internal" href="#gino.engine.GinoConnection" title="gino.engine.GinoConnection"><code class="xref py py-class docutils literal notranslate"><span class="pre">GinoConnection</span></code></a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="gino.engine.GinoEngine.dialect">
<em class="property">property </em><code class="sig-name descname">dialect</code><a class="headerlink" href="#gino.engine.GinoEngine.dialect" title="Permalink to this definition">¶</a></dt>
<dd><p>Read-only property for the
<a class="reference external" href="https://docs.sqlalchemy.org/en/13/core/internals.html#sqlalchemy.engine.interfaces.Dialect" title="(in SQLAlchemy v1.3)"><code class="xref py py-class docutils literal notranslate"><span class="pre">Dialect</span></code></a> of this engine.</p>
</dd></dl>

<dl class="py method">
<dt id="gino.engine.GinoEngine.first">
<em class="property">async </em><code class="sig-name descname">first</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">clause</span></em>, <em class="sig-param"><span class="o">*</span><span class="n">multiparams</span></em>, <em class="sig-param"><span class="o">**</span><span class="n">params</span></em><span class="sig-paren">)</span><a class="headerlink" href="#gino.engine.GinoEngine.first" title="Permalink to this definition">¶</a></dt>
<dd><p>Runs <a class="reference internal" href="#gino.engine.GinoConnection.first" title="gino.engine.GinoConnection.first"><code class="xref py py-meth docutils literal notranslate"><span class="pre">first()</span></code></a>, See <a class="reference internal" href="#gino.engine.GinoEngine.all" title="gino.engine.GinoEngine.all"><code class="xref py py-meth docutils literal notranslate"><span class="pre">all()</span></code></a>.</p>
</dd></dl>

<dl class="py method">
<dt id="gino.engine.GinoEngine.iterate">
<code class="sig-name descname">iterate</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">clause</span></em>, <em class="sig-param"><span class="o">*</span><span class="n">multiparams</span></em>, <em class="sig-param"><span class="o">**</span><span class="n">params</span></em><span class="sig-paren">)</span><a class="headerlink" href="#gino.engine.GinoEngine.iterate" title="Permalink to this definition">¶</a></dt>
<dd><p>Creates a server-side cursor in database for large query results.</p>
<p>This requires that there is a reusable connection in the current
context, and an active transaction is present. Then its
<a class="reference internal" href="#gino.engine.GinoConnection.iterate" title="gino.engine.GinoConnection.iterate"><code class="xref py py-meth docutils literal notranslate"><span class="pre">GinoConnection.iterate()</span></code></a> is executed and returned.</p>
</dd></dl>

<dl class="py method">
<dt id="gino.engine.GinoEngine.one">
<em class="property">async </em><code class="sig-name descname">one</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">clause</span></em>, <em class="sig-param"><span class="o">*</span><span class="n">multiparams</span></em>, <em class="sig-param"><span class="o">**</span><span class="n">params</span></em><span class="sig-paren">)</span><a class="headerlink" href="#gino.engine.GinoEngine.one" title="Permalink to this definition">¶</a></dt>
<dd><p>Runs <a class="reference internal" href="#gino.engine.GinoConnection.one" title="gino.engine.GinoConnection.one"><code class="xref py py-meth docutils literal notranslate"><span class="pre">one()</span></code></a>, See <a class="reference internal" href="#gino.engine.GinoEngine.all" title="gino.engine.GinoEngine.all"><code class="xref py py-meth docutils literal notranslate"><span class="pre">all()</span></code></a>.</p>
</dd></dl>

<dl class="py method">
<dt id="gino.engine.GinoEngine.one_or_none">
<em class="property">async </em><code class="sig-name descname">one_or_none</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">clause</span></em>, <em class="sig-param"><span class="o">*</span><span class="n">multiparams</span></em>, <em class="sig-param"><span class="o">**</span><span class="n">params</span></em><span class="sig-paren">)</span><a class="headerlink" href="#gino.engine.GinoEngine.one_or_none" title="Permalink to this definition">¶</a></dt>
<dd><p>Runs <a class="reference internal" href="#gino.engine.GinoConnection.one_or_none" title="gino.engine.GinoConnection.one_or_none"><code class="xref py py-meth docutils literal notranslate"><span class="pre">one_or_none()</span></code></a>, See <a class="reference internal" href="#gino.engine.GinoEngine.all" title="gino.engine.GinoEngine.all"><code class="xref py py-meth docutils literal notranslate"><span class="pre">all()</span></code></a>.</p>
</dd></dl>

<dl class="py method">
<dt id="gino.engine.GinoEngine.raw_pool">
<em class="property">property </em><code class="sig-name descname">raw_pool</code><a class="headerlink" href="#gino.engine.GinoEngine.raw_pool" title="Permalink to this definition">¶</a></dt>
<dd><p>Read-only access to the underlying database connection pool instance.
This depends on the actual dialect in use, <a class="reference external" href="https://magicstack.github.io/asyncpg/current/api/index.html#asyncpg.pool.Pool" title="(in asyncpg v0.21.0)"><code class="xref py py-class docutils literal notranslate"><span class="pre">Pool</span></code></a>
of asyncpg for example.</p>
</dd></dl>

<dl class="py method">
<dt id="gino.engine.GinoEngine.repr">
<code class="sig-name descname">repr</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">color</span><span class="o">=</span><span class="default_value">False</span></em><span class="sig-paren">)</span><a class="headerlink" href="#gino.engine.GinoEngine.repr" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="gino.engine.GinoEngine.scalar">
<em class="property">async </em><code class="sig-name descname">scalar</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">clause</span></em>, <em class="sig-param"><span class="o">*</span><span class="n">multiparams</span></em>, <em class="sig-param"><span class="o">**</span><span class="n">params</span></em><span class="sig-paren">)</span><a class="headerlink" href="#gino.engine.GinoEngine.scalar" title="Permalink to this definition">¶</a></dt>
<dd><p>Runs <a class="reference internal" href="#gino.engine.GinoConnection.scalar" title="gino.engine.GinoConnection.scalar"><code class="xref py py-meth docutils literal notranslate"><span class="pre">scalar()</span></code></a>, See <a class="reference internal" href="#gino.engine.GinoEngine.all" title="gino.engine.GinoEngine.all"><code class="xref py py-meth docutils literal notranslate"><span class="pre">all()</span></code></a>.</p>
</dd></dl>

<dl class="py method">
<dt id="gino.engine.GinoEngine.status">
<em class="property">async </em><code class="sig-name descname">status</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">clause</span></em>, <em class="sig-param"><span class="o">*</span><span class="n">multiparams</span></em>, <em class="sig-param"><span class="o">**</span><span class="n">params</span></em><span class="sig-paren">)</span><a class="headerlink" href="#gino.engine.GinoEngine.status" title="Permalink to this definition">¶</a></dt>
<dd><p>Runs <a class="reference internal" href="#gino.engine.GinoConnection.status" title="gino.engine.GinoConnection.status"><code class="xref py py-meth docutils literal notranslate"><span class="pre">status()</span></code></a>. See also <a class="reference internal" href="#gino.engine.GinoEngine.all" title="gino.engine.GinoEngine.all"><code class="xref py py-meth docutils literal notranslate"><span class="pre">all()</span></code></a>.</p>
</dd></dl>

<dl class="py method">
<dt id="gino.engine.GinoEngine.transaction">
<code class="sig-name descname">transaction</code><span class="sig-paren">(</span><em class="sig-param"><span class="o">*</span><span class="n">args</span></em>, <em class="sig-param"><span class="n">timeout</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">reuse</span><span class="o">=</span><span class="default_value">True</span></em>, <em class="sig-param"><span class="n">reusable</span><span class="o">=</span><span class="default_value">True</span></em>, <em class="sig-param"><span class="o">**</span><span class="n">kwargs</span></em><span class="sig-paren">)</span><a class="headerlink" href="#gino.engine.GinoEngine.transaction" title="Permalink to this definition">¶</a></dt>
<dd><p>Borrows a new connection and starts a transaction with it.</p>
<p>Different to <a class="reference internal" href="#gino.engine.GinoConnection.transaction" title="gino.engine.GinoConnection.transaction"><code class="xref py py-meth docutils literal notranslate"><span class="pre">GinoConnection.transaction()</span></code></a>, transaction on engine
level supports only managed usage:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">async</span> <span class="k">with</span> <span class="n">engine</span><span class="o">.</span><span class="n">transaction</span><span class="p">()</span> <span class="k">as</span> <span class="n">tx</span><span class="p">:</span>
    <span class="c1"># play with transaction here</span>
</pre></div>
</div>
<p>Where the implicitly acquired connection is available as
<a class="reference internal" href="gino.transaction.html#gino.transaction.GinoTransaction.connection" title="gino.transaction.GinoTransaction.connection"><code class="xref py py-attr docutils literal notranslate"><span class="pre">tx.connection</span></code></a>.</p>
<p>By default, <a class="reference internal" href="#gino.engine.GinoEngine.transaction" title="gino.engine.GinoEngine.transaction"><code class="xref py py-meth docutils literal notranslate"><span class="pre">transaction()</span></code></a> acquires connection with
<code class="docutils literal notranslate"><span class="pre">reuse=True</span></code> and <code class="docutils literal notranslate"><span class="pre">reusable=True</span></code>, that means it by default tries to
create a nested transaction instead of a new transaction on a new
connection. You can change the default behavior by setting these two
arguments.</p>
<p>The other arguments are the same as
<a class="reference internal" href="#gino.engine.GinoConnection.transaction" title="gino.engine.GinoConnection.transaction"><code class="xref py py-meth docutils literal notranslate"><span class="pre">transaction()</span></code></a> on connection.</p>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="#gino.engine.GinoEngine.acquire" title="gino.engine.GinoEngine.acquire"><code class="xref py py-meth docutils literal notranslate"><span class="pre">GinoEngine.acquire()</span></code></a></p>
<p><a class="reference internal" href="#gino.engine.GinoConnection.transaction" title="gino.engine.GinoConnection.transaction"><code class="xref py py-meth docutils literal notranslate"><span class="pre">GinoConnection.transaction()</span></code></a></p>
<p><a class="reference internal" href="gino.transaction.html#gino.transaction.GinoTransaction" title="gino.transaction.GinoTransaction"><code class="xref py py-class docutils literal notranslate"><span class="pre">GinoTransaction</span></code></a></p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>A asynchronous context manager that yields a
<a class="reference internal" href="gino.transaction.html#gino.transaction.GinoTransaction" title="gino.transaction.GinoTransaction"><code class="xref py py-class docutils literal notranslate"><span class="pre">GinoTransaction</span></code></a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="gino.engine.GinoEngine.update_execution_options">
<code class="sig-name descname">update_execution_options</code><span class="sig-paren">(</span><em class="sig-param"><span class="o">**</span><span class="n">opt</span></em><span class="sig-paren">)</span><a class="headerlink" href="#gino.engine.GinoEngine.update_execution_options" title="Permalink to this definition">¶</a></dt>
<dd><p>Update the default execution_options dictionary
of this <a class="reference internal" href="#gino.engine.GinoEngine" title="gino.engine.GinoEngine"><code class="xref py py-class docutils literal notranslate"><span class="pre">GinoEngine</span></code></a>.</p>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference external" href="https://docs.sqlalchemy.org/en/13/core/connections.html#sqlalchemy.engine.Engine.update_execution_options" title="(in SQLAlchemy v1.3)"><code class="xref py py-meth docutils literal notranslate"><span class="pre">sqlalchemy.engine.Engine.update_execution_options()</span></code></a></p>
<p><a class="reference internal" href="#gino.engine.GinoConnection.execution_options" title="gino.engine.GinoConnection.execution_options"><code class="xref py py-meth docutils literal notranslate"><span class="pre">GinoConnection.execution_options()</span></code></a></p>
</div>
</dd></dl>

</dd></dl>

</div>


            </div>
            <p style="text-align: center; font-size: 12px;">
                <a rel="license" href="http://creativecommons.org/licenses/by-sa/4.0/">
                    <img
                        alt="Creative Commons License"
                        style="border-width:0"
                        src="https://i.creativecommons.org/l/by-sa/4.0/80x15.png"
                    />
                </a>
                <br/>
                This work is licensed under a<a rel="license" href="http://creativecommons.org/licenses/by-sa/4.0/"> Creative Commons Attribution-ShareAlike 4.0 International License</a>.
            </p>
        </div>

        <div class="col hide-on-small-only m3 right-nav">
            <div class="table-of-contents fixed">
                
                    <ul>
<li><a class="reference internal" href="#">gino.engine module</a></li>
</ul>

                
                <div id="version-selector">
                    
                    
                        <div class="version-warning">
                            
                                You're on the master branch. This documentation may include
                                functionality that is not released yet.
                            
                        </div>
                    
                </div>
                <div class="add-your-lang">
                    <a href="https://www.transifex.com/decentfox-studio/gino_1_0/"
                       target="_blank">Add your language here.</a>
                </div>
            </div>
        </div>

    </div>
    <div class="fixed-action-btn click-to-toggle">
        <a class="btn-floating btn-large white">
            <img src="../../_static/images/language.svg">
            <div>
              EN
            </div>
        </a>
        <ul id="lang-selector">
        </ul>
    </div>
</main>

<script type="text/javascript" src="../../_static/js/materialize.min.js"></script>
<script type="text/javascript" src="../../_static/js/language_data.js"></script>
<script id="documentation_options" data-url_root="../../" src="../../_static/js/documentation_options.js"></script>
<script type="text/javascript" src="../../_static/js/underscore.js"></script>
<script type="text/javascript" src="../../_static/js/jquery.js"></script>
<script type="text/javascript">
    var sver = 'master';
    var language = 'en';
    var pagename = 'reference/api/gino.engine';
</script>
<script type="text/javascript" src="../../_static/js/gino.js"></script>
<script type="text/javascript" src="../../searchindex.js"></script>
</body>
</html>